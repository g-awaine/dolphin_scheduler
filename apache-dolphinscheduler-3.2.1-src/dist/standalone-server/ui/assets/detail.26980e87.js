import{g as Ce,F as Ie}from"./get-elements-by-json.9201707b.js";import{u as m,a as s,n as _,e as Y,w as x,J as ve,t as V,R as ne,by as ie,bR as Me,bt as se,aL as h,be as oe,d as qe,A as De,c as Oe}from"./index.851b5188.js";import{s as $,u as S,a as E,b as w,c as I,d as G}from"./index.module.4a3c8d75.js";import{q as Fe}from"./index.336ca31d.js";import{u as J,T as ge}from"./task-type.dfd9250b.js";import{s as le}from"./service.4be3af67.js";import{l as ee}from"./lodash.68b7405b.js";import{q as je,a as pe,b as xe,g as He}from"./index.23da2c90.js";import{a as Te,b as Ye,c as Ue}from"./index.59799c67.js";import{g as Ge}from"./index.41692750.js";import{e as be,f as me,h as fe,i as ye}from"./index.56bd039e.js";import{l as Je}from"./index.b3847370.js";import{a as Qe}from"./index.605d19c5.js";import{t as Ve}from"./common.ee372ad3.js";import{N as re}from"./Ellipsis.b13f7726.js";import{N as We}from"./Icon.afc45566.js";import{b as $e,g as Be,c as ae}from"./index.1abd1843.js";import"./Form.9f7fa8c1.js";import"./FormItem.f5b3f80b.js";import"./use-form-item.bb4d7ada.js";import"./format-length.d7d829b3.js";import"./get.aa32335f.js";import"./resolve-slot.9e6a0162.js";import"./keysOf.ab13e590.js";import"./Grid.3ae564e0.js";import"./index.7a579f81.js";import"./utils.f449ed5c.js";import"./is-browser.45c3bd93.js";import"./VResizeObserver.6721b9ea.js";import"./flatten.05a2e46f.js";import"./get-slot.80096ab3.js";import"./next-frame-once.e5ee25e8.js";import"./Spin.447cad15.js";import"./fade-in.cssr.55dfcced.js";import"./use-compitable.ae5454ac.js";import"./Input.79ba0d48.js";import"./Button.4e249408.js";import"./use-locale.f8ac8f2c.js";import"./use-merged-state.e40d3a9f.js";import"./Scrollbar.7a99b971.js";import"./Suffix.21a8a87f.js";import"./Radio.fc32ca3b.js";import"./RadioGroup.c3ead4f3.js";import"./Space.f9ece73f.js";import"./index.2fc51a01.js";import"./DeleteOutlined.07e1d3fe.js";import"./index.e739cd60.js";import"./use-false-until-truthy.5d7093c9.js";import"./Switch.f95d65b1.js";import"./InputNumber.cc83334e.js";import"./Add.3164a73d.js";import"./Select.3e0f2c28.js";import"./fade-in-scale-up.cssr.5737b1c6.js";import"./Selection.28a32045.js";import"./Popover.30015336.js";import"./_baseMap.9542141b.js";import"./index.3ef69258.js";import"./Checkbox.98b84c16.js";import"./TreeSelect.5a0f3466.js";import"./ArrowUpOutlined.284f08d8.js";import"./index.2d754617.js";import"./index.71fea87c.js";import"./ui-setting.39219f0f.js";import"./SettingOutlined.e20148d7.js";import"./PauseCircleOutlined.28d888d0.js";import"./CloseCircleOutlined.9e282d8c.js";import"./CheckCircleOutlined.67794958.js";import"./EditOutlined.e0b6da4a.js";import"./index.d671386a.js";import"./Tooltip.52cb9ce9.js";function k(t){const{t:e}=m();return{type:"input",field:"name",class:"input-node-name",name:e(t===1?"project.node.task_name":"project.node.name"),props:{placeholder:e("project.node.name_tips"),maxLength:100},validate:{trigger:["input","blur"],required:!0,message:e("project.node.name_tips")}}}function L(){const{t}=m(),e=[{label:t("project.node.normal"),value:"YES"},{label:t("project.node.prohibition_execution"),value:"NO"}];return{type:"radio",field:"flag",name:t("project.node.run_flag"),options:e,span:12}}function q(){const{t}=m();return{type:"switch",field:"isCache",name:t("project.node.is_cache"),span:12}}function N(){const{t}=m();return{type:"input",field:"description",name:t("project.node.description"),props:{placeholder:t("project.node.description_tips"),rows:2,type:"textarea"}}}function A(t,e){const{t:o}=m(),a=s([]),r=s(!1),n=_(()=>!t.taskGroupId),i=async()=>{if(r.value)return;r.value=!0;const{totalList:l=[]}=await Fe({pageNo:1,pageSize:2147483647,projectCode:e});a.value=l.map(p=>({label:p.name,value:p.id})),r.value=!1};return Y(()=>{i()}),x(()=>t.taskGroupId,l=>{l||(t.taskGroupId=null,t.taskGroupPriority=null)}),[{type:"select",field:"taskGroupId",span:12,name:o("project.node.task_group_name"),props:{loading:r,clearable:!0},options:a},{type:"input-number",field:"taskGroupPriority",name:o("project.node.task_group_queue_priority"),props:{max:Math.pow(10,60)-1,disabled:n},span:12}]}function M(t){const{t:e}=m();return{type:"input-number",field:"delayTime",name:e("project.node.delay_execution_time"),span:12,props:{min:0},slots:{suffix:()=>e("project.node.minute")},value:t.delayTime||0}}function C(t){const{t:e}=m(),o=_(()=>t.timeoutFlag?12:0),a=[{label:e("project.node.timeout_alarm"),value:"WARN"},{label:e("project.node.timeout_failure"),value:"FAILED"}];return[{type:"switch",field:"timeoutFlag",name:e("project.node.timeout_alarm"),props:{"on-update:value":r=>{r&&(t.timeoutNotifyStrategy.length||(t.timeoutNotifyStrategy=["WARN"]),t.timeout||(t.timeout=30))}}},{type:"checkbox",field:"timeoutNotifyStrategy",name:e("project.node.timeout_strategy"),options:a,span:o,validate:{trigger:["input"],validator(r,n){if(t.timeoutFlag&&!n.length)return new Error(e("project.node.timeout_strategy_tips"))}}},{type:"input-number",field:"timeout",name:e("project.node.timeout_period"),span:o,props:{max:Math.pow(10,10)-1},slots:{suffix:()=>e("project.node.minute")},validate:{trigger:["input"],validator(r,n){if(t.timeoutFlag&&!/^[1-9]\d*$/.test(String(n)))return new Error(e("project.node.timeout_period_tips"))}}}]}function P(){const{t}=m(),e=J(),o=s(e.getPreTaskOptions);return x(()=>e.getPreTaskOptions,a=>{o.value=a}),{type:"select",field:"preTasks",span:24,class:"pre-tasks-model",name:t("project.node.pre_tasks"),props:{multiple:!0,filterable:!0},options:o}}function B(t,e){const{t:o}=m(),a=["CONDITIONS","SWITCH"],r=Object.keys(ge).map(n=>({label:n,value:n,disabled:a.includes(n)}));return{type:"select",field:"taskType",span:24,name:o("project.node.task_type"),props:{disabled:e||["CONDITIONS","SWITCH"].includes(t.taskType),filterable:!0},options:r,validate:{trigger:["input","blur"],required:!0,message:o("project.node.task_type_tips")},value:t.taskType?t.taskType:"SHELL"}}function K({model:t,projectCode:e,isCreate:o,from:a,processName:r,taskCode:n}){const{t:i}=m(),l=J(),p=s([]),u=s(!1),f=async()=>{if(u.value)return;u.value=!0;const j=await je(e);p.value=j.map(F=>({label:F.name,value:F.code})),u.value=!1},d=async j=>{if(!j)return;const F=await pe(j,e);t.definition=F,l.updateDefinition(F,n)},v=j=>{d(j)};return Y(()=>{a===1&&r&&d(r),f()}),{type:"select",field:"processName",span:24,name:i("project.node.workflow_name"),props:{loading:u,disabled:!o,"on-update:value":v},validate:{trigger:["input","blur"],required:!0,validator(j,F){if(!F)return new Error(i("project.node.workflow_name_tips"))}},options:p}}function he({model:t,projectCode:e,from:o,processName:a,code:r}){const{t:n}=m(),i=s([]),l=s(!1),p=async()=>{if(l.value)return;l.value=!0;const f=await je(e);i.value=f.filter(d=>d.code!==r).map(d=>({label:d.name,value:d.code})),l.value=!1},u=async f=>{if(!f)return;const d=await pe(f,e);t.definition=d};return Y(()=>{o===1&&a&&u(a),p()}),{type:"select",field:"processDefinitionCode",span:24,name:n("project.node.child_node"),props:{loading:l,filterable:!0},options:i,class:"select-child-node",validate:{trigger:["input","blur"],required:!0,validator(f,d){if(!d)return Error(n("project.node.child_node_tips"))}}}}function Ke(){const{t}=m();return{type:"input",field:"targetJobName",name:t("project.node.target_task_name"),props:{placeholder:t("project.node.target_task_name_tips"),maxLength:100},validate:{trigger:["input","blur"],required:!0,message:t("project.node.target_task_name_tips")}}}function z(t,e={}){const{t:o}=m(),a=s([]),r=s([]),n=[{id:0,code:"MYSQL",disabled:!1},{id:1,code:"POSTGRESQL",disabled:!1},{id:2,code:"HIVE",disabled:!1},{id:3,code:"SPARK",disabled:!1},{id:4,code:"CLICKHOUSE",disabled:!1},{id:5,code:"ORACLE",disabled:!1},{id:6,code:"SQLSERVER",disabled:!1},{id:7,code:"DB2",disabled:!1},{id:8,code:"PRESTO",disabled:!1},{id:9,code:"REDSHIFT",disabled:!1},{id:10,code:"ATHENA",disabled:!1},{id:12,code:"TRINO",disabled:!1},{id:13,code:"STARROCKS",disabled:!1},{id:14,code:"AZURESQL",disabled:!1},{id:15,code:"DAMENG",disabled:!1},{id:15,code:"SSH",disabled:!0},{id:16,code:"DATABEND",disabled:!1},{id:21,code:"VERTICA",disabled:!1},{id:22,code:"HANA",disabled:!1},{id:23,code:"DORIS",disabled:!1}],i=async()=>{a.value=n.filter(u=>u.disabled?!1:e.supportedDatasourceType?ee.exports.indexOf(e.supportedDatasourceType,u.code)!==-1:!0).map(u=>({label:u.code,value:u.code}))},l=async()=>{const u={type:t[e.typeField||"type"],testFlag:0},f=await be(u);r.value=f.map(v=>({label:v.name,value:v.id}));const d=e.sourceField||"datasource";!f.length&&t[d]&&(t[d]=null),f.length&&t[d]&&(ee.exports.find(f,{id:t[d]})||(t[d]=null))},p=()=>{l()};return Y(async()=>{i(),await ve(),l()}),[{type:"select",field:e.typeField||"type",span:e.span||12,name:o("project.node.datasource_type"),props:{"on-update:value":p},options:a,validate:{trigger:["input","blur"],required:!0}},{type:"select",field:e.sourceField||"datasource",span:e.span||12,name:o("project.node.datasource_instances"),options:r,validate:{trigger:["input","blur"],required:!0,validator(u,f){if(!f&&f!==0)return Error(o("project.node.datasource_instances"))}}}]}function ze(t){const{t:e}=m(),o=_(()=>t.sqlType==="0"?6:0),a=_(()=>t.sqlType==="0"&&t.sendEmail?24:0),r=s([]),n=s(!1),i=[{value:"0",label:e("project.node.sql_type_query")},{value:"1",label:e("project.node.sql_type_non_query")}],l=async()=>{if(n.value)return;n.value=!0;const p=await Je();r.value=p.map(u=>({label:u.groupName,value:u.id})),n.value=!1};return Y(()=>{l()}),[{type:"select",field:"sqlType",span:6,name:e("project.node.sql_type"),options:i,validate:{trigger:["input","blur"],required:!0}},{type:"switch",field:"sendEmail",span:o,name:e("project.node.send_email")},{type:"select",field:"displayRows",span:o,name:e("project.node.log_display"),options:Xe,props:{filterable:!0,tag:!0},validate:{trigger:["input","blur"],validator(p,u){if(!/^\+?[1-9][0-9]*$/.test(u))return new Error(e("project.node.integer_tips"))}}},{type:"custom",field:"displayRowsTips",span:o,widget:V("div",{class:$["display-rows-tips"]},e("project.node.rows_of_result"))},{type:"input",field:"title",name:e("project.node.title"),props:{placeholder:e("project.node.title_tips")},span:a,validate:{trigger:["input","blur"],required:!0,validator(p,u){if(t.sendEmail&&!u)return new Error(e("project.node.title_tips"))}}},{type:"select",field:"groupId",name:e("project.node.alarm_group"),options:r,span:a,props:{loading:n,placeholder:e("project.node.alarm_group_tips")},validate:{trigger:["input","blur"],required:!0,validator(p,u){if(t.sendEmail&&!u)return new Error(e("project.node.alarm_group_tips"))}}}]}const Xe=[{label:"1",value:1},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100}];function Ze(t){const{t:e}=m();return[{type:"editor",field:"method",name:e("project.node.procedure_method"),props:{language:"sql",placeholder:e("project.node.procedure_method_tips")},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.procedure_method_tips")}},...O({model:t,field:"localParams",isSimple:!1})]}function O({model:t,field:e,isSimple:o,name:a="custom_parameters",span:r=24}){const{t:n}=m();return[{type:"custom-parameters",field:e,name:n(`project.node.${a}`),class:"btn-custom-parameters",span:r,children:[{type:"input",field:"prop",span:6,class:"input-param-key",props:{placeholder:n("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(i,l){if(!l)return new Error(n("project.node.prop_tips"));if(t[e].filter(u=>u.prop===l).length>1)return new Error(n("project.node.prop_repeat"))}}},{type:"select",field:"direct",span:4,options:tt,value:"IN",props:{disabled:o}},{type:"select",field:"type",span:6,options:et,value:"VARCHAR",props:{disabled:o}},{type:"input",field:"value",span:6,class:"input-param-value",props:{placeholder:n("project.node.value_tips"),maxLength:256}}]}]}const et=[{value:"VARCHAR",label:"VARCHAR"},{value:"INTEGER",label:"INTEGER"},{value:"LONG",label:"LONG"},{value:"FLOAT",label:"FLOAT"},{value:"DOUBLE",label:"DOUBLE"},{value:"DATE",label:"DATE"},{value:"TIME",label:"TIME"},{value:"TIMESTAMP",label:"TIMESTAMP"},{value:"BOOLEAN",label:"BOOLEAN"},{value:"LIST",label:"LIST"},{value:"FILE",label:"FILE"}],tt=[{value:"IN",label:"IN"},{value:"OUT",label:"OUT"}];function rt({model:t,field:e,name:o="custom_labels",span:a=24}){const{t:r}=m();return[{type:"custom-parameters",field:e,name:r(`project.node.${o}`),class:"btn-custom-parameters",span:a,children:[{type:"input",field:"label",span:8,class:"customized-label-name",props:{placeholder:r("project.node.label_name_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(n,i){if(!i)return new Error(r("project.node.label_name_tips"));if(t[e].filter(p=>p.label===i).length>1)return new Error(r("project.node.label_repeat"))}}},{type:"input",field:"value",span:14,class:"customized-label-value",props:{placeholder:r("project.node.label_value_tips"),maxLength:256}}]}]}function at({model:t,field:e,name:o,span:a=24}){const{t:r}=m();return[{type:"custom-parameters",field:e,name:r(`project.node.${o}`),class:"btn-custom-parameters",span:a,children:[{type:"input",field:"key",span:8,class:"node-selector-label-name",props:{placeholder:r("project.node.expression_name_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(n,i){if(!i)return new Error(r("project.node.expression_name_tips"));if(t[e].filter(p=>p.label===i).length>1)return new Error(r("project.node.label_repeat"))}}},{type:"select",field:"operator",span:4,options:ot,value:"In"},{type:"input",field:"values",span:10,class:"node-selector-label-value",props:{placeholder:r("project.node.expression_value_tips"),maxLength:256,disabled:!1}}]}]}const ot=[{value:"In",label:"In"},{value:"NotIn",label:"NotIn"},{value:"Exists",label:"Exists"},{value:"DoesNotExist",label:"DoesNotExist"},{value:"Gt",label:"Gt"},{value:"Lt",label:"Lt"}];function Se(t,e,o,a){const{t:r}=m(),n=s([]),i=s(!1),l=async p=>{if(i.value)return;i.value=!0;const f=await be({type:p,testFlag:0});n.value=f.map(d=>({label:d.name,value:d.id})),i.value=!1};return Y(()=>{l("MYSQL")}),[{type:"select",field:o,name:r("project.node.datasource"),span:e,options:[{label:"MYSQL",value:"MYSQL"}],validate:{required:!0}},{type:"select",field:a,name:" ",span:e,props:{placeholder:r("project.node.datasource_tips"),filterable:!0,loading:i},options:n,validate:{trigger:["blur","input"],validator(p,u){if(!u)return new Error(r("project.node.datasource_tips"))}}}]}function nt(t,e){const{t:o}=m(),a=s(24),r=s(0),n=s(24),i=s(0),l=s(0),p=s(0),u=s(12),f=()=>{a.value=e.value&&t.sourceType==="MYSQL"?24:0,r.value=a.value&&t.srcQueryType==="0"?24:0,n.value=a.value&&t.srcQueryType==="1"?24:0,i.value=r.value&&t.srcColumnType==="1"?24:0,l.value=e.value&&t.sourceType==="HIVE"?24:0,p.value=e.value&&t.sourceType==="HDFS"?24:0,u.value=e.value&&t.sourceType==="MYSQL"?12:0},d=s([{label:"MYSQL",value:"MYSQL"}]),v=j=>{switch(j){case"import":return[{label:"MYSQL",value:"MYSQL"}];case"export":return[{label:"HDFS",value:"HDFS"},{label:"HIVE",value:"HIVE"}];default:return[{label:"MYSQL",value:"MYSQL"},{label:"HDFS",value:"HDFS"},{label:"HIVE",value:"HIVE"}]}};return x(()=>t.modelType,j=>{d.value=v(j),t.sourceType||(t.sourceType=d.value[0].value)}),x(()=>[e.value,t.sourceType,t.srcQueryType,t.srcColumnType],()=>{f()}),[{type:"custom",field:"custom-title-source",span:e,widget:V("div",{class:$["field-title"]},o("project.node.data_source"))},{type:"select",field:"sourceType",name:o("project.node.type"),span:e,options:d},...Se(t,u,"sourceMysqlType","sourceMysqlDatasource"),{type:"radio",field:"srcQueryType",name:o("project.node.model_type"),span:a,options:[{label:o("project.node.form"),value:"0"},{label:"SQL",value:"1"}],props:{"on-update:value":j=>{t.targetType=j==="0"?"HIVE":"HDFS"}}},{type:"input",field:"srcTable",name:o("project.node.table"),span:r,props:{placeholder:o("project.node.table_tips")},validate:{trigger:["input","blur"],required:!0,validator(j,F){if(r.value&&!F)return new Error(o("project.node.table_tips"))}}},{type:"radio",field:"srcColumnType",name:o("project.node.column_type"),span:r,options:[{label:o("project.node.all_columns"),value:"0"},{label:o("project.node.some_columns"),value:"1"}]},{type:"input",field:"srcColumns",name:o("project.node.column"),span:i,props:{placeholder:o("project.node.column_tips")},validate:{trigger:["input","blur"],required:!0,validator(j,F){if(!!i.value&&!F)return new Error(o("project.node.column_tips"))}}},{type:"input",field:"sourceHiveDatabase",name:o("project.node.database"),span:l,props:{placeholder:o("project.node.database_tips")},validate:{trigger:["blur","input"],required:!0,validator(j,F){if(l.value&&!F)return new Error(o("project.node.database_tips"))}}},{type:"input",field:"sourceHiveTable",name:o("project.node.table"),span:l,props:{placeholder:o("project.node.hive_table_tips")},validate:{trigger:["blur","input"],required:!0,validator(j,F){if(l.value&&!F)return new Error(o("project.node.hive_table_tips"))}}},{type:"input",field:"sourceHivePartitionKey",name:o("project.node.hive_partition_keys"),span:l,props:{placeholder:o("project.node.hive_partition_keys_tips")}},{type:"input",field:"sourceHivePartitionValue",name:o("project.node.hive_partition_values"),span:l,props:{placeholder:o("project.node.hive_partition_values_tips")}},{type:"input",field:"sourceHdfsExportDir",name:o("project.node.export_dir"),span:p,props:{placeholder:o("project.node.export_dir_tips")},validate:{trigger:["blur","input"],required:!0,validator(j,F){if(p.value&&!F)return new Error(o("project.node.export_dir_tips"))}}},{type:"editor",field:"sourceMysqlSrcQuerySql",name:o("project.node.sql_statement"),span:n,validate:{trigger:["blur","input"],required:!0,validator(j,F){if(n.value&&!F)return new Error(o("project.node.sql_statement_tips"))}}},...O({model:t,field:"mapColumnHive",name:"map_column_hive",isSimple:!0,span:a}),...O({model:t,field:"mapColumnJava",name:"map_column_java",isSimple:!0,span:a})]}function it(t,e){const{t:o}=m(),a=s(0),r=s(24),n=s(0),i=s(0),l=s(0),p=()=>{a.value=e.value&&t.targetType==="HIVE"?24:0,r.value=e.value&&t.targetType==="HDFS"?24:0,n.value=e.value&&t.targetType==="MYSQL"?24:0,i.value=e.value&&t.targetType==="MYSQL"?12:0,l.value=n.value&&t.targetMysqlIsUpdate?24:0},u=s([{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]),f=(d,v)=>{switch(d){case"MYSQL":return v==="1"?[{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]:[{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}];case"HDFS":case"HIVE":return[{label:"MYSQL",value:"MYSQL"}];default:return[{label:"HIVE",value:"HIVE"},{label:"HDFS",value:"HDFS"}]}};return x(()=>[t.sourceType,t.srcQueryType],([d,v])=>{u.value=f(d,v),t.targetType||(t.targetType=u.value[0].value)}),x(()=>[e.value,t.targetType,t.targetMysqlIsUpdate],()=>{p()}),[{type:"custom",field:"custom-title-target",span:e,widget:V("div",{class:$["field-title"]},o("project.node.data_target"))},{type:"select",field:"targetType",name:o("project.node.type"),span:e,options:u},{type:"input",field:"targetHiveDatabase",name:o("project.node.database"),span:a,props:{placeholder:o("project.node.database_tips")},validate:{trigger:["blur","input"],required:!0,validator(d,v){if(a.value&&!v)return new Error(o("project.node.database_tips"))}}},{type:"input",field:"targetHiveTable",name:o("project.node.table"),span:a,props:{placeholder:o("project.node.table")},validate:{trigger:["blur","input"],required:!0,validator(d,v){if(a.value&&!v)return new Error(o("project.node.hive_table_tips"))}}},{type:"switch",field:"targetHiveCreateTable",span:a,name:o("project.node.create_hive_table")},{type:"switch",field:"targetHiveDropDelimiter",span:a,name:o("project.node.drop_delimiter")},{type:"switch",field:"targetHiveOverWrite",span:a,name:o("project.node.over_write_src")},{type:"input",field:"targetHiveTargetDir",name:o("project.node.hive_target_dir"),span:a,props:{placeholder:o("project.node.hive_target_dir_tips")}},{type:"input",field:"targetHiveReplaceDelimiter",name:o("project.node.replace_delimiter"),span:a,props:{placeholder:o("project.node.replace_delimiter_tips")}},{type:"input",field:"targetHivePartitionKey",name:o("project.node.hive_partition_keys"),span:a,props:{placeholder:o("project.node.hive_partition_keys_tips")}},{type:"input",field:"targetHivePartitionValue",name:o("project.node.hive_partition_values"),span:a,props:{placeholder:o("project.node.hive_partition_values_tips")}},{type:"input",field:"targetHdfsTargetPath",name:o("project.node.target_dir"),span:r,props:{placeholder:o("project.node.target_dir_tips")},validate:{trigger:["blur","input"],required:!0,validator(d,v){if(r.value&&!v)return new Error(o("project.node.target_dir_tips"))}}},{type:"switch",field:"targetHdfsDeleteTargetDir",name:o("project.node.delete_target_dir"),span:r},{type:"radio",field:"targetHdfsCompressionCodec",name:o("project.node.compression_codec"),span:r,options:st},{type:"radio",field:"targetHdfsFileType",name:o("project.node.file_type"),span:r,options:lt},{type:"input",field:"targetHdfsFieldsTerminated",name:o("project.node.fields_terminated"),span:r,props:{placeholder:o("project.node.fields_terminated_tips")}},{type:"input",field:"targetHdfsLinesTerminated",name:o("project.node.lines_terminated"),span:r,props:{placeholder:o("project.node.lines_terminated_tips")}},...Se(t,i,"targetMysqlType","targetMysqlDatasource"),{type:"input",field:"targetMysqlTable",name:o("project.node.table"),span:n,props:{placeholder:o("project.node.hive_table_tips")},validate:{trigger:["blur","input"],required:!0,validator(d,v){if(n.value&&!v)return new Error(o("project.node.table_tips"))}}},{type:"input",field:"targetMysqlColumns",name:o("project.node.column"),span:n,props:{placeholder:o("project.node.column_tips")}},{type:"input",field:"targetMysqlFieldsTerminated",name:o("project.node.fields_terminated"),span:n,props:{placeholder:o("project.node.fields_terminated_tips")}},{type:"input",field:"targetMysqlLinesTerminated",name:o("project.node.lines_terminated"),span:n,props:{placeholder:o("project.node.lines_terminated_tips")}},{type:"switch",field:"targetMysqlIsUpdate",span:n,name:o("project.node.is_update")},{type:"input",field:"targetMysqlTargetUpdateKey",name:o("project.node.update_key"),span:l,props:{placeholder:o("project.node.update_key_tips")}},{type:"radio",field:"targetMysqlUpdateMode",name:o("project.node.update_mode"),span:l,options:[{label:o("project.node.only_update"),value:"updateonly"},{label:o("project.node.allow_insert"),value:"allowinsert"}]}]}const st=[{label:"snappy",value:"snappy"},{label:"lzo",value:"lzo"},{label:"gzip",value:"gzip"},{label:"no",value:""}],lt=[{label:"avro",value:"--as-avrodatafile"},{label:"sequence",value:"--as-sequencefile"},{label:"text",value:"--as-textfile"},{label:"parquet",value:"--as-parquetfile"}];function Ee({model:t,children:e,childrenField:o,name:a}){const{t:r}=m(),n=_(()=>t.dependTaskList.length?3:0);return ne(()=>{t.dependTaskList.forEach((i,l)=>{i[o].length===0&&t.dependTaskList.splice(l,1)})}),[{type:"custom",name:r(`project.node.${a}`),field:"relationLabel",span:24,class:$["relaction-label"]},{type:"switch",field:"relation",props:{round:!1,"checked-value":"AND","unchecked-value":"OR",size:"small"},slots:{checked:()=>r("project.node.and"),unchecked:()=>r("project.node.or")},span:n,class:$["relaction-switch"]},{type:"custom-parameters",field:"dependTaskList",span:20,children:[{type:"switch",field:"relation",props:{round:!1,"checked-value":"AND","unchecked-value":"OR",size:"small"},slots:{checked:()=>r("project.node.and"),unchecked:()=>r("project.node.or")},span:4,value:"AND",class:$["relaction-switch"]},e]}]}function pt(t){const{t:e}=m(),o=_(()=>t.timeoutShowFlag?24:0),a=_(()=>t.timeoutFlag&&t.timeoutShowFlag?12:0),r=[{label:e("project.node.timeout_alarm"),value:"WARN"},{label:e("project.node.timeout_failure"),value:"FAILED"}];return x(()=>t.timeoutFlag,n=>{t.timeoutShowFlag=n}),[{type:"switch",field:"timeoutShowFlag",name:e("project.node.timeout_alarm")},{type:"switch",field:"timeoutFlag",name:e("project.node.waiting_dependent_complete"),props:{"on-update:value":n=>{n&&(t.timeoutNotifyStrategy.length||(t.timeoutNotifyStrategy=["WARN"]),t.timeout||(t.timeout=30))}},span:o},{type:"input-number",field:"timeout",name:e("project.node.timeout_period"),span:a,props:{max:Math.pow(9,10)-1},slots:{suffix:()=>e("project.node.minute")},validate:{trigger:["input"],validator(n,i){if(t.timeoutFlag&&!/^[1-9]\d*$/.test(String(i)))return new Error(e("project.node.timeout_period_tips"))}}},{type:"checkbox",field:"timeoutNotifyStrategy",name:e("project.node.timeout_strategy"),options:r,span:a,validate:{trigger:["input"],validator(n,i){if(t.waitCompleteTimeoutEnable&&!i.length)return new Error(e("project.node.timeout_strategy_tips"))}}}]}function ut(t,e){const{t:o}=m(),a=s([]),r=s(!1),n=s([]),i=s([]),l=s([]),p=s([]),u=s([]),f=s([]),d=s([]),v=s([]),j=s([]),F=_(()=>t.comparison_type===1?24:0);let Q=0;const X=async()=>{if(r.value)return;r.value=!0;const y=await $e();a.value=y.map(c=>{let b="";return c.name&&(b=c.name.replace("$t(","").replace(")","")),{value:c.id,label:b?o(`project.node.${b}`):""}}),r.value=!1},Z=async y=>{if(r.value)return;r.value=!0;const c=await Be(y),b=JSON.parse(c).map(T=>R(T));e(b,Q),Q=b.length,r.value=!1},R=y=>{var T;const c={field:y.field,options:y.options,validate:y.validate,props:y.props,value:y.value},b=(T=y.name)==null?void 0:T.replace("$t(","").replace(")","");return c.name=b?o(`project.node.${b}`):"",y.type!=="group"?c.type=y.type:(c.type="custom-parameters",c.children=c.props.rules.map(H=>(H.span=Math.floor(22/c.props.rules.length),H)),t[c.field]=t[c.field]||[],delete c.props.rules),y.emit&&y.emit.forEach(H=>{H==="change"&&(c.props.onUpdateValue=W=>{g(W,c.field,!0)})}),y.props.placeholder&&(c.props.placeholder=o("project.node."+y.props.placeholder.split(" ").join("_").split(",").join("").toLowerCase())),c.field==="src_datasource_id"&&(c.options=n),c.field==="src_database"&&(c.options=i),c.field==="target_datasource_id"&&(c.options=u),c.field==="target_database"&&(c.options=f),c.field==="writer_datasource_id"&&(c.options=j),c.field==="src_table"&&(c.options=l,c.props.filterable=!0),c.field==="target_table"&&(c.options=d,c.props.filterable=!0),c.field==="src_field"&&(c.options=p),c.field==="target_field"&&(c.options=v),t[c.field]!==void 0&&(g(t[c.field],c.field,!1),c.value=t[c.field]),c},g=async(y,c,b)=>{if(c==="src_connector_type"&&typeof y=="number"){const T=await ae(y);n.value=T||[],b&&(i.value=[],l.value=[],p.value=[],t.src_datasource_id=null,t.src_database=null,t.src_table=null,t.src_field=null);return}if(c==="target_connector_type"&&typeof y=="number"){const T=await ae(y);u.value=T||[],b&&(f.value=[],d.value=[],v.value=[],t.target_datasource_id=null,t.target_database=null,t.target_table=null,t.target_field=null);return}if(c==="writer_connector_type"&&typeof y=="number"){const T=await ae(y);j.value=T||[],b&&(t.writer_datasource_id=null);return}if(c==="src_datasource_id"&&typeof y=="number"){const T=await me(y);i.value=T||[],b&&(l.value=[],p.value=[],t.src_database=null,t.src_table=null,t.src_field=null)}if(c==="target_datasource_id"&&typeof y=="number"){const T=await me(y);f.value=T||[],b&&(d.value=[],v.value=[],t.target_database=null,t.target_table=null,t.target_field=null)}if(c==="src_database"&&typeof y=="string"){const T=await fe(t.src_datasource_id,y);l.value=T||[],b&&(p.value=[],t.src_table=null,t.src_field=null)}if(c==="target_database"&&typeof y=="string"){const T=await fe(t.target_datasource_id,y);d.value=T||[],b&&(v.value=[],t.target_table=null,t.target_field=null)}if(c==="src_table"&&typeof y=="string"){const T=await ye(t.src_datasource_id,t.src_database,y);p.value=T||[],b&&(t.src_field=null)}if(c==="target_table"&&typeof y=="string"){const T=await ye(t.target_datasource_id,t.target_database,y);v.value=T||[],b&&(t.target_field=null)}};return Y(async()=>{await X(),await Z(t.ruleId)}),[{type:"select",field:"ruleId",name:o("project.node.rule_name"),props:{loading:r,onUpdateValue:Z},options:a},{type:"input",field:"comparison_name",name:o("project.node.fix_value"),props:{placeholder:o("project.node.fix_value")},span:F}]}function ue(t=24,e=s(!0),o=s(!0),a=s(!0)){const{t:r}=m(),n=s(_e);return ne(()=>{n.value=_e.filter(i=>{switch(i.value){case"cluster":return o.value;case"client":return e.value;case"local":return a.value;default:return!0}})}),{type:"radio",field:"deployMode",name:r("project.node.deploy_mode"),options:n,span:t}}const _e=[{label:"cluster",value:"cluster"},{label:"client",value:"client"},{label:"local",value:"local"}];function we(){const{t}=m();return{type:"input-number",field:"driverCores",name:t("project.node.driver_cores"),span:12,props:{placeholder:t("project.node.driver_cores_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.driver_cores_tips"))}}}}function ke(){const{t}=m();return{type:"input",field:"driverMemory",name:t("project.node.driver_memory"),span:12,props:{placeholder:t("project.node.driver_memory_tips")},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.driver_memory_tips"));if(!Number.isInteger(parseInt(o)))return new Error(t("project.node.driver_memory")+t("project.node.positive_integer_tips"))}}}}function Le(){const{t}=m();return{type:"input-number",field:"numExecutors",name:t("project.node.executor_number"),span:12,props:{placeholder:t("project.node.executor_number_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_number_tips"))}}}}function Ne(){const{t}=m();return{type:"input",field:"executorMemory",name:t("project.node.executor_memory"),span:12,props:{placeholder:t("project.node.executor_memory_tips")},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_memory_tips"));if(!Number.isInteger(parseInt(o)))return new Error(t("project.node.executor_memory_tips")+t("project.node.positive_integer_tips"))}}}}function Pe(){const{t}=m();return{type:"input-number",field:"executorCores",name:t("project.node.executor_cores"),span:12,props:{placeholder:t("project.node.executor_cores_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(e,o){if(!o)return new Error(t("project.node.executor_cores_tips"))}}}}function ce(t){const{t:e}=m(),o=s([]),a=J(),r=_(()=>t.programType==="SQL"?0:24),n=async i=>{const l=a.getMainJar(i);if(l){o.value=l;return}const p=await Te({type:"FILE",programType:i});ie.removeUselessChildren(p),o.value=p||[],a.updateMainJar(i,p)};return Y(()=>{n(t.programType)}),x(()=>t.programType,i=>{i!=="SQL"&&n(i)}),{type:"tree-select",field:"mainJar",name:e("project.node.main_package"),span:r,props:{checkable:!0,cascade:!0,showPath:!0,checkStrategy:"child",placeholder:e("project.node.main_package_tips"),keyField:"fullName",labelField:"name"},validate:{trigger:["input","blur"],required:t.programType!=="SQL",validator(i,l){if(!l&&t.programType!=="SQL")return new Error(e("project.node.main_package_tips"))}},options:o}}function U(t=24,e=!1,o=-1){const{t:a}=m(),r=s([]),n=s(!1),i=J(),l=async()=>{if(i.resources.length){r.value=i.resources;return}if(n.value)return;n.value=!0;const p=await Ye({type:"FILE",fullName:""});ie.removeUselessChildren(p),r.value=p||[],n.value=!1,i.updateResource(p)};return Y(()=>{l()}),{type:"tree-select",field:"resourceList",name:a("project.node.resources"),span:t,options:r,props:{multiple:!0,checkable:!0,cascade:!0,showPath:!0,filterable:!0,clearFilterAfterSelect:!1,checkStrategy:"child",placeholder:a("project.node.resources_tips"),keyField:"fullName",labelField:"name",loading:n},validate:{trigger:["input","blur"],required:e,validator(p,u){if(Me(e)?e.value:e){if(!u||u.length==0)return new Error(a("project.node.resources_tips"));if(o>0&&u.length>o)return new Error(a("project.node.resources_limit_tips")+o)}}}}}const D=({projectCode:t,from:e=0,readonly:o,data:a,model:r})=>e===0?[]:[B(r,o),K({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName,taskCode:a==null?void 0:a.code})];function ct(t){const{t:e}=m(),o=s([]),a=J(),r=_(()=>t.runType==="JAVA"?0:24),n=async i=>{const l=a.getMainJar(i);if(l){o.value=l;return}const p=await Te({type:"FILE",programType:i});ie.removeUselessChildren(p),o.value=p||[],a.updateMainJar(i,p)};return Y(()=>{n(t.programType)}),x(()=>t.programType,i=>{n(i)}),{type:"tree-select",field:"mainJar",name:e("project.node.main_package"),span:r,props:{checkable:!0,cascade:!0,showPath:!0,checkStrategy:"child",placeholder:e("project.node.main_package_tips"),keyField:"fullName",labelField:"name"},validate:{trigger:["input","blur"],required:!0,validator(i,l){if(!l)return new Error(e("project.node.main_package_tips"))}},options:o}}function Re(t){const{t:e}=m();return[{type:"editor",field:"rawScript",name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},U(),...O({model:t,field:"localParams",isSimple:!1})]}function dt(t){const{t:e}=m(),o=_(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24),a=_(()=>t.programType==="SQL"?0:24),r=_(()=>t.programType==="SQL"&&t.sqlExecutionType==="SCRIPT"?24:0),n=_(()=>t.programType!=="SQL"),i=s(t.programType==="SQL"&&t.sqlExecutionType==="FILE"),l=_(()=>t.programType==="SQL"&&t.sqlExecutionType==="FILE"?1:-1),p=_(()=>t.programType==="SQL"?12:0),u=[{label:e("project.node.sql_execution_type_from_script"),value:"SCRIPT"},{label:e("project.node.sql_execution_type_from_file"),value:"FILE"}];return x(()=>[t.sqlExecutionType,t.programType],()=>{i.value=t.programType==="SQL"&&t.sqlExecutionType==="FILE"}),[{type:"select",field:"programType",span:12,name:e("project.node.program_type"),options:mt,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}}},{type:"select",field:"sqlExecutionType",span:p,name:e("project.node.sql_execution_type"),options:u,validate:{trigger:["input","blur"],required:!0}},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON"&&t.programType!=="SQL",validator(f,d){if(t.programType!=="PYTHON"&&!d&&t.programType!=="SQL")return new Error(e("project.node.main_class_tips"))}}},ce(t),{type:"editor",field:"rawScript",span:r,name:e("project.node.script"),props:{language:"sql"},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},ue(24,s(!0),n),de(),{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")}},we(),ke(),Le(),Ne(),Pe(),te(),{type:"input",field:"mainArgs",span:a,name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},U(24,i,l),...O({model:t,field:"localParams",isSimple:!1})]}const mt=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"},{label:"SQL",value:"SQL"}];function ft(t){const{t:e}=m(),o=_(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24);return[{type:"select",field:"programType",span:12,name:e("project.node.program_type"),options:yt,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}},value:t.programType},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON",validator(a,r){if(t.programType!=="PYTHON"&&!r)return new Error(e("project.node.main_class_tips"))}}},ce(t),{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")}},te(),{type:"input",field:"mainArgs",name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},U(),...O({model:t,field:"localParams",isSimple:!0})]}const yt=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"}];function Ae(t){const{t:e}=m(),o=_(()=>t.programType==="PYTHON"||t.programType==="SQL"?0:24),a=_(()=>t.programType==="SQL"?0:24),r=_(()=>t.programType==="SQL"?24:0),n=_(()=>t.programType==="SQL"?[{label:">=1.13",value:">=1.13"}]:vt),i=_(()=>t.flinkVersion==="<1.10"&&t.deployMode!=="local"?12:0),l=_(()=>t.deployMode!=="local"?12:0),p=_(()=>t.deployMode!=="local"?24:0),u=_(()=>t.programType==="SQL"?[{label:"per-job/cluster",value:"cluster"},{label:"local",value:"local"},{label:"standalone",value:"standalone"}]:t.flinkVersion==="<1.10"?[{label:"cluster",value:"cluster"},{label:"local",value:"local"}]:[{label:"per-job/cluster",value:"cluster"},{label:"application",value:"application"},{label:"local",value:"local"}]);return x(()=>t.flinkVersion,()=>{t.flinkVersion==="<1.10"&&t.deployMode==="application"&&(t.deployMode="cluster")}),ne(()=>{t.flinkVersion=t.programType==="SQL"?">=1.13":t.flinkVersion}),[{type:"select",field:"programType",span:24,name:e("project.node.program_type"),options:_t,props:{"on-update:value":()=>{t.mainJar=null,t.mainClass=""}}},{type:"input",field:"mainClass",span:o,name:e("project.node.main_class"),props:{placeholder:e("project.node.main_class_tips")},validate:{trigger:["input","blur"],required:t.programType!=="PYTHON"&&t.programType!=="SQL",validator(f,d){if(t.programType!=="PYTHON"&&!d&&t.programType!=="SQL")return new Error(e("project.node.main_class_tips"))}}},ce(t),{type:"radio",field:"deployMode",name:e("project.node.deploy_mode"),options:u,span:24},{type:"editor",field:"initScript",span:r,name:e("project.node.init_script"),validate:{trigger:["input","trigger"],required:!1,message:e("project.node.init_script_tips")}},{type:"editor",field:"rawScript",span:r,name:e("project.node.script"),props:{language:"sql"},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},{type:"select",field:"flinkVersion",name:e("project.node.flink_version"),options:n,value:t.flinkVersion,span:l},{type:"input",field:"appName",name:e("project.node.app_name"),props:{placeholder:e("project.node.app_name_tips")},span:p},{type:"input",field:"jobManagerMemory",name:e("project.node.job_manager_memory"),span:l,props:{placeholder:e("project.node.job_manager_memory_tips"),min:1},validate:{trigger:["input","blur"],validator(f,d){if(!!d&&!Number.isInteger(parseInt(d)))return new Error(e("project.node.job_manager_memory_tips")+e("project.node.positive_integer_tips"))}}},{type:"input",field:"taskManagerMemory",name:e("project.node.task_manager_memory"),span:l,props:{placeholder:e("project.node.task_manager_memory_tips")},validate:{trigger:["input","blur"],validator(f,d){if(!!d&&!Number.isInteger(parseInt(d)))return new Error(e("project.node.task_manager_memory")+e("project.node.positive_integer_tips"))}},value:t.taskManagerMemory},{type:"input-number",field:"slot",name:e("project.node.slot_number"),span:l,props:{placeholder:e("project.node.slot_number_tips"),min:1},value:t.slot},{type:"input-number",field:"taskManager",name:e("project.node.task_manager_number"),span:i,props:{placeholder:e("project.node.task_manager_number_tips"),min:1},value:t.taskManager},{type:"input-number",field:"parallelism",name:e("project.node.parallelism"),span:12,props:{placeholder:e("project.node.parallelism_tips"),min:1},validate:{trigger:["input","blur"],required:!0,validator(f,d){if(!d)return new Error(e("project.node.parallelism_tips"))}},value:t.parallelism},te(),{type:"input",field:"mainArgs",span:a,name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},U(),...O({model:t,field:"localParams",isSimple:!0})]}const _t=[{label:"JAVA",value:"JAVA"},{label:"SCALA",value:"SCALA"},{label:"PYTHON",value:"PYTHON"},{label:"SQL",value:"SQL"}],vt=[{label:"<1.10",value:"<1.10"},{label:"1.11",value:"1.11"},{label:">=1.12",value:">=1.12"}];function gt(t){const{t:e}=m(),o=[{label:e("project.node.status_code_default"),value:"STATUS_CODE_DEFAULT"},{label:e("project.node.status_code_custom"),value:"STATUS_CODE_CUSTOM"},{label:e("project.node.body_contains"),value:"BODY_CONTAINS"},{label:e("project.node.body_not_contains"),value:"BODY_NOT_CONTAINS"}];return[{type:"input",field:"url",name:e("project.node.http_url"),props:{placeholder:e("project.node.http_url_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.http_url_tips"));if(r.search(new RegExp(/http[s]{0,1}:\/\/\S*/,"i")))return new Error(e("project.node.http_url_validator"))}}},{type:"select",field:"httpMethod",span:12,name:e("project.node.http_method"),options:jt},{type:"custom-parameters",field:"httpParams",name:e("project.node.http_parameters"),children:[{type:"input",field:"prop",span:6,props:{placeholder:e("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.prop_tips"));if(t.httpParams.filter(i=>i.prop===r).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"select",field:"httpParametersType",span:6,options:Tt,value:"PARAMETER"},{type:"input",field:"value",span:6,props:{placeholder:e("project.node.value_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.value_required_tips"))}}}]},{type:"select",field:"httpCheckCondition",name:e("project.node.http_check_condition"),options:o},{type:"input",field:"condition",name:e("project.node.http_condition"),props:{type:"textarea",placeholder:e("project.node.http_condition_tips")}},{type:"input-number",field:"connectTimeout",name:e("project.node.connect_timeout"),span:12,props:{max:Math.pow(7,10)-1},slots:{suffix:()=>e("project.node.ms")},validate:{trigger:["input","blur"],validator(a,r){if(!Number.isInteger(parseInt(r)))return new Error(e("project.node.connect_timeout")+e("project.node.positive_integer_tips"))}}},{type:"input-number",field:"socketTimeout",name:e("project.node.socket_timeout"),span:12,props:{max:Math.pow(7,10)-1},slots:{suffix:()=>e("project.node.ms")},validate:{trigger:["input","blur"],validator(a,r){if(!Number.isInteger(parseInt(r)))return new Error(e("project.node.socket_timeout")+e("project.node.positive_integer_tips"))}}},...O({model:t,field:"localParams",isSimple:!0})]}const jt=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"HEAD",label:"HEAD"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],Tt=[{value:"PARAMETER",label:"Parameter"},{value:"BODY",label:"Body"},{value:"HEADERS",label:"Headers"}];function bt(t){const{t:e}=m(),o=s([]),a=s(!1),r=_(()=>["HIVE","SPARK","KYUUBI"].includes(t.type)?24:0),n=async()=>{if(a.value)return;a.value=!0;const i=t.type==="KYUUBI"?"HIVE":t.type,l=await Ue({type:i});o.value=l.map(p=>({value:String(p.id),label:p.funcName})),a.value=!1};return x(()=>t.type,i=>{["HIVE","SPARK","KYUUBI"].includes(i)&&n()}),{type:"select",field:"udfs",options:o,name:e("project.node.udf_function"),props:{multiple:!0,loading:a},span:r}}function ht(t){const{t:e}=m(),o=_(()=>t.type==="HIVE"?24:0);return[{type:"input",field:"connParams",name:e("project.node.sql_parameter"),props:{placeholder:e("project.node.format_tips")+" key1=value1;key2=value2..."},span:o},{type:"editor",field:"sql",name:e("project.node.sql_statement"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")},props:{language:"sql"}},bt(t),...O({model:t,field:"localParams",isSimple:!1}),{type:"multi-input",field:"preStatements",name:e("project.node.pre_sql_statement"),span:22,props:{placeholder:e("project.node.sql_input_placeholder"),type:"textarea",autosize:{minRows:1}}},{type:"multi-input",field:"postStatements",name:e("project.node.post_sql_statement"),span:22,props:{placeholder:e("project.node.sql_input_placeholder"),type:"textarea",autosize:{minRows:1}}}]}function St(t){const{t:e}=m(),o=_(()=>t.isCustomTask?24:0),a=_(()=>t.isCustomTask?0:24),r=_(()=>t.isCustomTask?0:12);return[{type:"switch",field:"isCustomTask",name:e("project.node.custom_job")},{type:"input",field:"jobName",name:e("project.node.sqoop_job_name"),span:a,props:{placeholder:e("project.node.sqoop_job_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(n,i){if(!t.isCustomTask&&!i)return new Error(e("project.node.sqoop_job_name_tips"))}}},{type:"select",field:"modelType",name:e("project.node.direct"),span:a,options:Et},...O({model:t,field:"hadoopCustomParams",name:"hadoop_custom_params",isSimple:!0,span:a}),...O({model:t,field:"sqoopAdvancedParams",name:"sqoop_advanced_parameters",isSimple:!0,span:a}),...nt(t,a),...it(t,a),{type:"input-number",field:"concurrency",name:e("project.node.concurrency"),span:r,props:{placeholder:e("project.node.concurrency_tips"),min:1}},{type:"input",field:"splitBy",name:e("project.node.concurrency_column"),span:r,props:{placeholder:e("project.node.concurrency_column_tips")}},{type:"editor",field:"customShell",name:e("project.node.custom_script"),span:o,validate:{trigger:["input","trigger"],required:!0,validator(n,i){if(o.value&&!i)return new Error(e("project.node.custom_script"))}}},...O({model:t,field:"localParams",name:"custom_parameters",isSimple:!0})]}const Et=[{label:"import",value:"import"},{label:"export",value:"export"}];function wt(t){const{t:e}=m(),o=_(()=>t.useCustom?24:0),a=_(()=>t.useCustom?0:24),r=_(()=>t.startupScript.includes("flink")?24:0),n=_(()=>t.startupScript.includes("spark")||t.startupScript==="seatunnel.sh"?24:0),i=_(()=>t.startupScript.includes("spark")&&t.deployMode!=="local"?12:0),l=_(()=>t.startupScript.includes("spark")&&t.deployMode!=="local"&&(t.master==="SPARK"||t.master==="MESOS")?12:0),p=_(()=>t.startupScript.includes("spark")),u=_(()=>t.startupScript==="seatunnel.sh"),f=_(()=>t.startupScript.includes("flink")||t.startupScript==="seatunnel.sh"?24:0);return[{type:"select",field:"startupScript",span:15,name:e("project.node.startup_script"),options:kt,validate:{trigger:["input","blur"],required:!0,message:e("project.node.startup_script_tips")},props:{"on-update:value":d=>{d&&(t.startupScript==="seatunnel.sh"&&(t.deployMode="local"),t.startupScript.includes("spark")&&(t.deployMode="client"))}}},{type:"select",field:"runMode",name:e("project.node.run_mode"),options:Lt,value:t.runMode,span:r},{type:"input",field:"others",name:e("project.node.option_parameters"),span:f,props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}},ue(n,p,s(!0),u),{type:"select",field:"master",name:e("project.node.sea_tunnel_master"),options:Nt,value:t.master,span:i},{type:"input",field:"masterUrl",name:e("project.node.sea_tunnel_master_url"),value:t.masterUrl,span:l,props:{placeholder:e("project.node.sea_tunnel_master_url_tips")},validate:{trigger:["input","blur"],required:l.value!==0,validator(d,v){if(l.value!==0&&!v)return new Error(e("project.node.sea_tunnel_master_url_tips"))}}},{type:"switch",field:"useCustom",name:e("project.node.custom_config")},{type:"editor",field:"rawScript",name:e("project.node.script"),span:o,validate:{trigger:["input","trigger"],required:t.useCustom,validator(d,v){if(t.useCustom&&!v)return new Error(e("project.node.script_tips"))}}},U(a,!0,1),...O({model:t,field:"localParams",isSimple:!0})]}const kt=[{label:"seatunnel.sh",value:"seatunnel.sh"},{label:"start-seatunnel-flink-13-connector-v2.sh",value:"start-seatunnel-flink-13-connector-v2.sh"},{label:"start-seatunnel-flink-15-connector-v2.sh",value:"start-seatunnel-flink-15-connector-v2.sh"},{label:"start-seatunnel-flink-connector-v2.sh",value:"start-seatunnel-flink-connector-v2.sh"},{label:"start-seatunnel-flink.sh",value:"start-seatunnel-flink.sh"},{label:"start-seatunnel-spark-2-connector-v2.sh",value:"start-seatunnel-spark-2-connector-v2.sh"},{label:"start-seatunnel-spark-3-connector-v2.sh",value:"start-seatunnel-spark-3-connector-v2.sh"},{label:"start-seatunnel-spark-connector-v2.sh",value:"start-seatunnel-spark-connector-v2.sh"},{label:"start-seatunnel-spark.sh",value:"start-seatunnel-spark.sh"}],Lt=[{label:"none",value:"NONE"},{label:"run",value:"RUN"},{label:"run-application",value:"RUN_APPLICATION"}],Nt=[{label:"yarn",value:"YARN"},{label:"local",value:"LOCAL"},{label:"spark://",value:"SPARK"},{label:"mesos://",value:"MESOS"}];function Pt(t,e){const{t:o}=m(),a=J(),r=s(a.postTaskOptions),n=s(!1),i=async()=>{if(n.value)return;n.value=!0,r.value=[];const p=await pe(t.processName,e);p==null||p.taskDefinitionList.forEach(u=>{u.code!=t.code&&r.value.push({label:u.name,value:u.code})}),n.value=!1,l(r.value)},l=p=>{var u,f;if(!p||!p.length){t.nextNode=null,(u=t.dependTaskList)==null||u.forEach(d=>{d.nextNode=null});return}ee.exports.findIndex(r.value,d=>d.value==t.nextNode)===-1&&(t.nextNode=null),(f=t.dependTaskList)==null||f.forEach(d=>{ee.exports.findIndex(r.value,v=>v.value==d.nextNode)===-1&&(d.nextNode=null)})};return x(()=>[t.processName,t.nextCode],()=>{t.processName&&i()}),Y(async()=>{await ve(),l(r.value)}),[{type:"custom-parameters",field:"dependTaskList",name:o("project.node.switch_condition"),children:[{type:"input",field:"condition",span:24,props:{loading:n,type:"textarea",autosize:{minRows:2}}},{type:"select",field:"nextNode",span:22,name:o("project.node.switch_branch_flow"),options:r}]},{type:"select",field:"nextNode",span:24,name:o("project.node.switch_branch_flow_default"),props:{loading:n},options:r}]}function Rt(t){const{t:e}=m(),o=[{label:`0(${e("project.node.unlimited")})`,value:0},{label:"1KB",value:1024},{label:"10KB",value:10240},{label:"50KB",value:51200},{label:"100KB",value:102400},{label:"512KB",value:524288}],a=[{label:`0(${e("project.node.unlimited")})`,value:0},{label:"500",value:500},{label:"1000",value:1e3},{label:"1500",value:1500},{label:"2000",value:2e3},{label:"2500",value:2500},{label:"3000",value:3e3}],r=[{label:"1G",value:1},{label:"2G",value:2},{label:"3G",value:3},{label:"4G",value:4}],n=s(24),i=s(0),l=s(12),p=s(8),u=s(22),f=s(12),d=s(0),v=()=>{t.customConfig?(n.value=0,i.value=24,l.value=0,p.value=0,u.value=0,f.value=0,d.value=24):(n.value=24,i.value=0,l.value=12,p.value=8,u.value=22,f.value=12,d.value=0)},j=["MYSQL","POSTGRESQL","ORACLE","SQLSERVER","CLICKHOUSE","DATABEND","HIVE","PRESTO"];return Y(()=>{v()}),x(()=>t.customConfig,()=>{v()}),[{type:"switch",field:"customConfig",name:e("project.node.datax_custom_template")},...z(t,{typeField:"dsType",sourceField:"dataSource",span:l,supportedDatasourceType:j}),{type:"editor",field:"sql",name:e("project.node.sql_statement"),span:n,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},{type:"editor",field:"json",name:e("project.node.datax_json_template"),span:i,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},U(d),...z(t,{typeField:"dtType",sourceField:"dataTarget",span:p,supportedDatasourceType:j}),{type:"input",field:"targetTable",name:e("project.node.datax_target_table"),span:p,props:{placeholder:e("project.node.datax_target_table_tips")},validate:{trigger:["input","blur"],required:!0}},{type:"multi-input",field:"preStatements",name:e("project.node.datax_target_database_pre_sql"),span:u,props:{placeholder:e("project.node.datax_non_query_sql_tips"),type:"textarea",autosize:{minRows:1}}},{type:"multi-input",field:"postStatements",name:e("project.node.datax_target_database_post_sql"),span:u,props:{placeholder:e("project.node.datax_non_query_sql_tips"),type:"textarea",autosize:{minRows:1}}},{type:"select",field:"jobSpeedByte",name:e("project.node.datax_job_speed_byte"),span:f,options:o,value:0},{type:"select",field:"jobSpeedRecord",name:e("project.node.datax_job_speed_record"),span:f,options:a,value:1e3},{type:"select",field:"xms",name:e("project.node.datax_job_runtime_memory_xms"),span:12,options:r,value:1},{type:"select",field:"xmx",name:e("project.node.datax_job_runtime_memory_xmx"),span:12,options:r,value:1},...O({model:t,field:"localParams",isSimple:!0})]}function At(t){const{t:e}=m(),o=J(),a=o.preTaskOptions.filter(n=>o.preTasks.includes(Number(n.value))),r=[{label:e("project.node.success"),value:"success"},{label:e("project.node.failed"),value:"failed"}];return[{type:"select",field:"successNode",name:e("project.node.state"),span:12,props:{disabled:!0},options:r},{type:"select",field:"successBranch",name:e("project.node.branch_flow"),span:12,props:{clearable:!0},validate:{trigger:["input","blur"],validator:(n,i)=>{if(i&&i===t.failedBranch)return new Error(e("project.node.branch_tips"))}},options:o.getPostTaskOptions},{type:"select",field:"failedNode",name:e("project.node.state"),span:12,props:{disabled:!0},options:r},{type:"select",field:"failedBranch",name:e("project.node.branch_flow"),span:12,props:{clearable:!0},validate:{trigger:["input","blur"],validator:(n,i)=>{if(i&&i===t.successBranch)return new Error(e("project.node.branch_tips"))}},options:o.getPostTaskOptions},...C(t),...Ee({model:t,children:{type:"custom-parameters",field:"dependItemList",span:18,children:[{type:"select",field:"depTaskCode",span:10,options:a},{type:"select",field:"status",span:10,options:[{value:"SUCCESS",label:e("project.node.success")},{value:"FAILURE",label:e("project.node.failed")}]}]},childrenField:"dependItemList",name:"add_pre_task_check_condition"})]}function Ct(t){const{t:e}=m(),o=se(),a=J(),r=_(()=>[{label:e("project.node.dependent_failure_policy_failure"),value:"DEPENDENT_FAILURE_FAILURE"},{label:e("project.node.dependent_failure_policy_waiting"),value:"DEPENDENT_FAILURE_WAITING"}]),n=_(()=>t.failurePolicy==="DEPENDENT_FAILURE_WAITING"?12:0),i=a.getDependentResult,l=Ve(e),p=s([]),u={},f={},d=s([]),v=[{value:"month",label:e("project.node.month")},{value:"week",label:e("project.node.week")},{value:"day",label:e("project.node.day")},{value:"hour",label:e("project.node.hour")}],j={hour:[{value:"currentHour",label:e("project.node.current_hour")},{value:"last1Hour",label:e("project.node.last_1_hour")},{value:"last2Hours",label:e("project.node.last_2_hour")},{value:"last3Hours",label:e("project.node.last_3_hour")},{value:"last24Hours",label:e("project.node.last_24_hour")}],day:[{value:"today",label:e("project.node.today")},{value:"last1Days",label:e("project.node.last_1_days")},{value:"last2Days",label:e("project.node.last_2_days")},{value:"last3Days",label:e("project.node.last_3_days")},{value:"last7Days",label:e("project.node.last_7_days")}],week:[{value:"thisWeek",label:e("project.node.this_week")},{value:"lastWeek",label:e("project.node.last_week")},{value:"lastMonday",label:e("project.node.last_monday")},{value:"lastTuesday",label:e("project.node.last_tuesday")},{value:"lastWednesday",label:e("project.node.last_wednesday")},{value:"lastThursday",label:e("project.node.last_thursday")},{value:"lastFriday",label:e("project.node.last_friday")},{value:"lastSaturday",label:e("project.node.last_saturday")},{value:"lastSunday",label:e("project.node.last_sunday")}],month:[{value:"thisMonth",label:e("project.node.this_month")},{value:"thisMonthBegin",label:e("project.node.this_month_begin")},{value:"lastMonth",label:e("project.node.last_month")},{value:"lastMonthBegin",label:e("project.node.last_month_begin")},{value:"lastMonthEnd",label:e("project.node.last_month_end")}]},F=async()=>{const R=await Qe();return p.value=R.map(g=>({value:g.code,label:()=>V(re,null,g.name),filterLabel:g.name})),p},Q=async R=>{if(u[R])return u[R];const y=(await xe(R)).map(c=>({value:c.code,label:()=>V(re,null,c.name),filterLabel:c.name}));return u[R]=y,y},X=async(R,g)=>{if(f[g])return f[g];const c=(await He(R,g)).map(b=>({value:b.code,label:()=>V(re,null,b.name),filterLabel:b.name}));return c.unshift({value:0,label:"ALL"}),f[g]=c,c},Z=R=>{if(!R||o.currentRoute.value.name!=="workflow-instance-detail")return null;const g=`${R.definitionCode}-${R.depTaskCode}-${R.cycle}-${R.dateValue}`,y=i[g];return V(We,{size:24,color:l[y].color},()=>V(l[y].icon))};return Y(()=>{F()}),x(()=>t.dependTaskList,R=>{d.value=[],R.forEach((g,y)=>{var b,T;if(!((b=g.dependItemList)!=null&&b.length))return;const c=s([]);(T=g.dependItemList)==null||T.forEach(async(H,W)=>{c.value[W]={},H.projectCode&&(c.value[W].definitionCodeOptions=await Q(H.projectCode)),H.projectCode&&H.definitionCode&&(c.value[W].depTaskCodeOptions=await X(H.projectCode,H.definitionCode)),H.cycle&&(c.value[W].dateOptions=j[H.cycle])}),d.value[y]={},d.value[y].dependItemList=c.value})}),[...pt(t),...Ee({model:t,children:(R=0)=>({type:"custom-parameters",field:"dependItemList",span:18,children:[(g=0)=>({type:"select",field:"projectCode",name:e("project.node.project_name"),span:24,props:{filterable:!0,filter:(y,c)=>c.filterLabel.toLowerCase().includes(y.toLowerCase()),onUpdateValue:async y=>{const c=t.dependTaskList[R].dependItemList[g],b=(d==null?void 0:d.value[R])||{},T=(b==null?void 0:b.dependItemList)||[],H={};H.definitionCodeOptions=await Q(y),T[g]=H,b.dependItemList=T,d.value[R]=b,c.depTaskCode=null,c.definitionCode=null}},options:p,path:`dependTaskList.${R}.dependItemList.${g}.projectCode`,rule:{required:!0,trigger:["input","blur"],validator(y,c){if(!c)return Error(e("project.node.project_name_tips"))}}}),(g=0)=>{var y,c;return{type:"select",field:"definitionCode",span:24,name:e("project.node.process_name"),props:{filterable:!0,filter:(b,T)=>T.filterLabel.toLowerCase().includes(b.toLowerCase()),onUpdateValue:async b=>{const T=t.dependTaskList[R].dependItemList[g];d.value[R].dependItemList[g].depTaskCodeOptions=await X(T.projectCode,b),T.depTaskCode=0}},options:((c=(y=d.value[R])==null?void 0:y.dependItemList[g])==null?void 0:c.definitionCodeOptions)||[],path:`dependTaskList.${R}.dependItemList.${g}.definitionCode`,rule:{required:!0,trigger:["input","blur"],validator(b,T){if(!T)return Error(e("project.node.process_name_tips"))}}}},(g=0)=>{var y,c;return{type:"select",field:"depTaskCode",span:24,name:e("project.node.task_name"),props:{filterable:!0,filter:(b,T)=>T.filterLabel.toLowerCase().includes(b.toLowerCase())},options:((c=(y=d.value[R])==null?void 0:y.dependItemList[g])==null?void 0:c.depTaskCodeOptions)||[],path:`dependTaskList.${R}.dependItemList.${g}.depTaskCode`,rule:{required:!0,trigger:["input","blur"],validator(b,T){if(!T&&T!==0)return Error(e("project.node.task_name_tips"))}}}},(g=0)=>({type:"select",field:"cycle",span:10,name:e("project.node.cycle_time"),props:{onUpdateValue:y=>{d.value[R].dependItemList[g].dateOptions=j[y],t.dependTaskList[R].dependItemList[g].dateValue=null}},options:v,path:`dependTaskList.${R}.dependItemList.${g}.cycle`,rule:{required:!0,trigger:["input","blur"],validator(y,c){if(!c)return Error(e("project.node.cycle_time_tips"))}}}),(g=0)=>{var y,c;return{type:"select",field:"dateValue",span:10,name:" ",options:((c=(y=d.value[R])==null?void 0:y.dependItemList[g])==null?void 0:c.dateOptions)||[],path:`dependTaskList.${R}.dependItemList.${g}.dateValue`,rule:{trigger:["input","blur"],validator(b,T){if(!T)return Error(e("project.node.date_tips"))}}}},(g=0)=>{var y;return{type:"custom",field:"state",span:2,name:" ",widget:Z((y=t.dependTaskList[R])==null?void 0:y.dependItemList[g])}}]}),childrenField:"dependItemList",name:"add_dependency"}),{type:"input-number",field:"checkInterval",name:e("project.node.check_interval"),span:12,props:{max:Math.pow(9,10)-1},slots:{suffix:()=>e("project.node.second")},validate:{trigger:["input"],validator(R,g){if(!g&&!/^[1-9]\d*$/.test(String(g)))return new Error(e("project.node.check_interval_tips"))}}},{type:"radio",field:"failurePolicy",name:e("project.node.dependent_failure_policy"),options:r,span:24},{type:"input-number",field:"failureWaitingTime",name:e("project.node.dependent_failure_waiting_time"),span:n,props:{max:Math.pow(9,10)-1},slots:{suffix:()=>e("project.node.minute")},validate:{trigger:["input"],required:!0,validator(R,g){if(t.timeoutFlag&&!/^[1-9]\d*$/.test(String(g)))return new Error(e("project.node.dependent_failure_waiting_time_tips"))}}}]}function It(t){const{t:e}=m(),o=_(()=>t.programType==="RUN_JOB_FLOW"?24:0),a=_(()=>t.programType==="ADD_JOB_FLOW_STEPS"?24:0);return[{type:"select",field:"programType",span:24,name:e("project.node.program_type"),options:Mt,validate:{required:!0}},{type:"editor",field:"jobFlowDefineJson",span:o,name:e("project.node.emr_flow_define_json"),props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.emr_flow_define_json_tips")}},{type:"editor",field:"stepsDefineJson",span:a,name:e("project.node.emr_steps_define_json"),props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.emr_steps_define_json_tips")}},...O({model:t,field:"localParams",isSimple:!0})]}const Mt=[{label:"RUN_JOB_FLOW",value:"RUN_JOB_FLOW"},{label:"ADD_JOB_FLOW_STEPS",value:"ADD_JOB_FLOW_STEPS"}];function qt(t){const{t:e}=m();return[{type:"input",field:"noteId",name:e("project.node.zeppelin_note_id"),props:{placeholder:e("project.node.zeppelin_note_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.zeppelin_note_id_tips"))}}},{type:"input",field:"paragraphId",name:e("project.node.zeppelin_paragraph_id"),props:{placeholder:e("project.node.zeppelin_paragraph_id_tips")}},{type:"input",field:"restEndpoint",name:e("project.node.zeppelin_rest_endpoint"),props:{placeholder:e("project.node.zeppelin_rest_endpoint_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.zeppelin_rest_endpoint_tips"))}}},{type:"input",field:"productionNoteDirectory",name:e("project.node.zeppelin_production_note_directory"),props:{placeholder:e("project.node.zeppelin_production_note_directory_tips")}},{type:"input",field:"username",name:e("project.node.zeppelin_username"),props:{placeholder:e("project.node.zeppelin_username_tips")}},{type:"input",field:"password",name:e("project.node.zeppelin_password"),props:{placeholder:e("project.node.zeppelin_password_tips")}},{type:"input",field:"parameters",name:e("project.node.zeppelin_parameters"),props:{placeholder:e("project.node.zeppelin_parameters_tips")}},...O({model:t,field:"localParams",isSimple:!1})]}function de(){const{t}=m(),e=s([]),o=s(!1),a=async()=>{if(o.value)return;o.value=!0;const n=await Ge();e.value=(n||[]).map(i=>({label:`${i.namespace}(${i.clusterName})`,value:JSON.stringify({name:i.namespace,cluster:i.clusterName})})),o.value=!1};Y(()=>{a()});const r=n=>n.type==="group"?n.label:[n.label];return{type:"select",field:"namespace",name:t("project.node.namespace_cluster"),props:{loading:o,"render-label":r,clearable:!0},options:[{type:"group",label:t("project.node.namespace_cluster"),key:t("project.node.namespace_cluster"),children:e}]}}function Dt(t){const{t:e}=m();return[de(),{type:"input-number",field:"minCpuCores",span:12,props:{min:0},name:e("project.node.min_cpu"),slots:{suffix:()=>e("project.node.cores")}},{type:"input-number",field:"minMemorySpace",span:12,props:{min:0},name:e("project.node.min_memory"),slots:{suffix:()=>e("project.node.mb")}},{type:"input",field:"image",name:e("project.node.image"),span:18,props:{placeholder:e("project.node.image_tips")},validate:{trigger:["input","blur"],required:!0,message:e("project.node.image_tips")}},{type:"select",field:"imagePullPolicy",name:e("project.node.image_pull_policy"),span:6,options:Ot,validate:{trigger:["input","blur"],required:!0,message:e("project.node.image_pull_policy_tips")},value:"IfNotPresent"},{type:"input",field:"command",name:e("project.node.command"),props:{placeholder:e("project.node.command_tips")}},{type:"input",field:"args",name:e("project.node.args"),props:{placeholder:e("project.node.args_tips")}},...rt({model:t,field:"customizedLabels",name:"custom_labels"}),...at({model:t,field:"nodeSelectors",name:"node_selectors"}),...O({model:t,field:"localParams",isSimple:!0})]}const Ot=[{value:"IfNotPresent",label:"IfNotPresent"},{value:"Always",label:"Always"},{value:"Never",label:"Never"}];function Ft(t){const{t:e}=m();return[{type:"input",field:"condaEnvName",name:e("project.node.jupyter_conda_env_name"),props:{placeholder:e("project.node.jupyter_conda_env_name_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_conda_env_name_tips"))}}},{type:"input",field:"inputNotePath",name:e("project.node.jupyter_input_note_path"),props:{placeholder:e("project.node.jupyter_input_note_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_input_note_path_tips"))}}},{type:"input",field:"outputNotePath",name:e("project.node.jupyter_output_note_path"),props:{placeholder:e("project.node.jupyter_output_note_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.jupyter_output_note_path_tips"))}}},{type:"input",field:"parameters",name:e("project.node.jupyter_parameters"),props:{placeholder:e("project.node.jupyter_parameters_tips")}},{type:"input",field:"kernel",name:e("project.node.jupyter_kernel"),props:{placeholder:e("project.node.jupyter_kernel_tips")}},{type:"input",field:"engine",name:e("project.node.jupyter_engine"),props:{placeholder:e("project.node.jupyter_engine_tips")}},{type:"input",field:"executionTimeout",name:e("project.node.jupyter_execution_timeout"),props:{placeholder:e("project.node.jupyter_execution_timeout_tips")}},{type:"input",field:"startTimeout",name:e("project.node.jupyter_start_timeout"),props:{placeholder:e("project.node.jupyter_start_timeout_tips")}},{type:"input",field:"others",name:e("project.node.jupyter_others"),props:{placeholder:e("project.node.jupyter_others_tips")}},U(),...O({model:t,field:"localParams",isSimple:!1})]}const xt=[{label:"MLflow Models",value:"MLflow Models"},{label:"MLflow Projects",value:"MLflow Projects"}];function Ht(t){const{t:e}=m();return[{type:"input",field:"mlflowTrackingUri",name:e("project.node.mlflow_mlflowTrackingUri"),span:12,props:{placeholder:e("project.node.mlflow_mlflowTrackingUri_tips")},validate:{trigger:["input","blur"],required:!1,validator(o,a){if(!a)return new Error(e("project.node.mlflow_mlflowTrackingUri_error_tips"))}}},{type:"select",field:"mlflowTaskType",name:e("project.node.mlflow_taskType"),span:12,options:xt},...Yt(t),...$t(t),U(),...O({model:t,field:"localParams",isSimple:!0})]}function Yt(t){const{t:e}=m(),o=s(0),a=s(0),r=s(0),n=s(0),i=s(0),l=s(0),p=()=>{t.isProjects=t.mlflowTaskType==="MLflow Projects"},u=()=>{o.value=t.isProjects?12:0,n.value=t.isProjects?12:0,l.value=t.isProjects?24:0,a.value=t.isProjects&&t.mlflowJobType!="CustomProject"?6:0,i.value=t.isProjects&&t.mlflowJobType!="CustomProject"?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{p(),u()}),x(()=>[t.registerModel],()=>{r.value=t.isProjects&&t.registerModel?6:0}),p(),u(),[{type:"select",field:"mlflowJobType",name:e("project.node.mlflow_jobType"),span:n,options:Qt},{type:"input",field:"experimentName",name:e("project.node.mlflow_experimentName"),span:o,props:{placeholder:e("project.node.mlflow_experimentName_tips")},validate:{trigger:["input","blur"],required:!1}},{type:"switch",field:"registerModel",name:e("project.node.mlflow_registerModel"),span:a},{type:"input",field:"modelName",name:e("project.node.mlflow_modelName"),span:r,props:{placeholder:e("project.node.mlflow_modelName_tips")},validate:{trigger:["input","blur"],required:!1}},{type:"input",field:"dataPath",name:e("project.node.mlflow_dataPath"),span:i,props:{placeholder:e("project.node.mlflow_dataPath_tips")}},{type:"input",field:"params",name:e("project.node.mlflow_params"),span:l,props:{placeholder:e("project.node.mlflow_params_tips")},validate:{trigger:["input","blur"],required:!1}},...Ut(t),...Gt(t),...Jt(t)]}function Ut(t){const{t:e}=m(),o=s(0),a=s(0),r=()=>{t.isBasicAlgorithm=t.mlflowJobType==="BasicAlgorithm"&&t.mlflowTaskType==="MLflow Projects"},n=()=>{o.value=t.isBasicAlgorithm?24:0,a.value=t.isBasicAlgorithm?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{r(),n()}),r(),n(),[{type:"select",field:"algorithm",name:e("project.node.mlflow_algorithm"),span:o,options:Vt},{type:"input",field:"searchParams",name:e("project.node.mlflow_searchParams"),props:{placeholder:e("project.node.mlflow_searchParams_tips")},span:a,validate:{trigger:["input","blur"],required:!1}}]}function Gt(t){const{t:e}=m(),o=s(0),a=()=>{t.isAutoML=t.mlflowJobType==="AutoML"&&t.mlflowTaskType==="MLflow Projects"},r=()=>{o.value=t.isAutoML?12:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{a(),r()}),a(),r(),[{type:"select",field:"automlTool",name:e("project.node.mlflow_automlTool"),span:o,options:Wt}]}function Jt(t){const{t:e}=m(),o=s(0),a=s(0),r=s(0),n=()=>{t.isCustomProject=t.mlflowJobType==="CustomProject"&&t.mlflowTaskType==="MLflow Projects"},i=()=>{o.value=t.isCustomProject?24:0,a.value=t.isCustomProject?12:0,r.value=t.isCustomProject?24:0};return x(()=>[t.mlflowTaskType,t.mlflowJobType],()=>{n(),i()}),n(),i(),[{type:"input",field:"mlflowProjectRepository",name:e("project.node.mlflowProjectRepository"),span:o,props:{placeholder:e("project.node.mlflowProjectRepository_tips")}},{type:"input",field:"mlflowProjectVersion",name:e("project.node.mlflowProjectVersion"),span:a,props:{placeholder:e("project.node.mlflowProjectVersion_tips")}}]}const Qt=[{label:"Custom Project",value:"CustomProject"},{label:"AutoML",value:"AutoML"},{label:"BasicAlgorithm",value:"BasicAlgorithm"}],Vt=[{label:"svm",value:"svm"},{label:"lr",value:"lr"},{label:"lightgbm",value:"lightgbm"},{label:"xgboost",value:"xgboost"}],Wt=[{label:"flaml",value:"flaml"},{label:"autosklearn",value:"autosklearn"}];function $t(t){const{t:e}=m(),o=s(0),a=s(0),r=s(0),n=()=>{t.isModels=t.mlflowTaskType==="MLflow Models"},i=()=>{o.value=t.isModels?12:0,a.value=t.isModels?24:0,r.value=t.isModels?12:0};return x(()=>[t.mlflowTaskType],()=>{n(),i()}),n(),i(),[{type:"select",field:"deployType",name:e("project.node.mlflow_deployType"),span:o,options:Bt},{type:"input",field:"deployModelKey",name:e("project.node.mlflow_deployModelKey"),span:a},{type:"input",field:"deployPort",name:e("project.node.mlflow_deployPort"),span:r}]}const Bt=[{label:"MLFLOW",value:"MLFLOW"},{label:"DOCKER",value:"DOCKER"}];function Kt(t){const{t:e}=m(),o=[{label:e("project.node.openmldb_execute_mode_offline"),value:"offline"},{label:e("project.node.openmldb_execute_mode_online"),value:"online"}];return[{type:"input",field:"zk",name:e("project.node.openmldb_zk_address"),props:{placeholder:e("project.node.openmldb_zk_address_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.openmldb_zk_address_tips"))}}},{type:"input",field:"zkPath",name:e("project.node.openmldb_zk_path"),props:{placeholder:e("project.node.openmldb_zk_path_tips")},validate:{trigger:["input","blur"],required:!0,validator(a,r){if(!r)return new Error(e("project.node.openmldb_zk_path_tips"))}}},{type:"radio",field:"executeMode",name:e("project.node.openmldb_execute_mode"),options:o},{type:"editor",field:"sql",name:e("project.node.sql_statement"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},U(),...O({model:t,field:"localParams",isSimple:!1})]}const zt=[{label:"Upload",value:"Upload"},{label:"Download",value:"Download"},{label:"Init DVC",value:"Init DVC"}];function Xt(t){const{t:e}=m(),o=s(0),a=s(0),r=s(0),n=s(0),i=s(0),l=()=>{t.isUpload=t.dvcTaskType==="Upload",t.isDownload=t.dvcTaskType==="Download",t.isInit=t.dvcTaskType==="Init DVC"},p=()=>{o.value=t.isUpload||t.isDownload?24:0,a.value=t.isUpload||t.isDownload?24:0,r.value=t.isUpload||t.isDownload?24:0,n.value=t.isUpload?24:0,i.value=t.isInit?24:0};return x(()=>[t.dvcTaskType],()=>{l(),p()}),l(),p(),[{type:"select",field:"dvcTaskType",name:e("project.node.dvc_task_type"),span:12,options:zt},{type:"input",field:"dvcRepository",name:e("project.node.dvc_repository"),span:24,props:{placeholder:e("project.node.dvc_repository_tips")},validate:{trigger:["input","blur"],required:!0,message:e("project.node.dvc_empty_tips")}},{type:"input",field:"dvcDataLocation",name:e("project.node.dvc_data_location"),props:{placeholder:"dvcDataLocation"},span:a,validate:{trigger:["input","blur"],required:!0,validator(u,f){if((t.isUpload||t.isDownload)&&!f)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcLoadSaveDataPath",name:e("project.node.dvc_load_save_data_path"),span:o,validate:{trigger:["input","blur"],required:!0,validator(u,f){if((t.isUpload||t.isDownload)&&!f)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcVersion",name:e("project.node.dvc_version"),span:r,props:{placeholder:e("project.node.dvc_version_tips")},validate:{trigger:["input","blur"],required:!0,validator(u,f){if((t.isUpload||t.isDownload)&&!f)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcMessage",name:e("project.node.dvc_message"),span:n,validate:{trigger:["input","blur"],required:!0,validator(u,f){if(t.isUpload&&!f)return new Error(e("project.node.dvc_empty_tips"))}}},{type:"input",field:"dvcStoreUrl",name:e("project.node.dvc_store_url"),span:i,validate:{trigger:["input","blur"],required:!0,validator(u,f){if(!t.isInit&&f)return new Error(e("project.node.dvc_empty_tips"))}}}]}function Zt(t){const{t:e}=m();return[{type:"input",field:"address",name:e("project.node.dinky_address"),props:{placeholder:e("project.node.dinky_address_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dinky_address_tips"))}}},{type:"input",field:"taskId",name:e("project.node.dinky_task_id"),props:{placeholder:e("project.node.dinky_task_id_tips")},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dinky_task_id_tips"))}}},{type:"switch",field:"online",name:e("project.node.dinky_online")},...O({model:t,field:"localParams",isSimple:!1})]}function er(t){return[{type:"editor",field:"sagemakerRequestJson",name:"SagemakerRequestJson",props:{language:"json"},validate:{trigger:["input","trigger"],required:!0,message:"requestJson"}},...O({model:t,field:"localParams",isSimple:!1})]}function tr(t){const{t:e}=m(),o=_(()=>t.runType==="JAR"?0:24);return[{type:"select",field:"runType",span:12,name:e("project.node.run_type"),options:rr,value:t.runType},{type:"switch",field:"isModulePath",span:24,name:e("project.node.is_module_path"),value:t.isModulePath},{type:"input",field:"mainArgs",name:e("project.node.main_arguments"),props:{type:"textarea",placeholder:e("project.node.main_arguments_tips")}},{type:"input",field:"jvmArgs",name:e("project.node.jvm_args"),props:{type:"textarea",placeholder:e("project.node.jvm_args_tips")}},ct(t),{type:"editor",field:"rawScript",span:o,name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},U(),...O({model:t,field:"localParams",isSimple:!1})]}const rr=[{label:"JAVA",value:"JAVA"},{label:"JAR",value:"JAR"}];function ar(t){const{t:e}=m(),o=s(0),a=s(0),r=()=>{o.value=24,a.value=24};return Y(()=>{r()}),[{type:"editor",field:"json",name:e("project.node.chunjun_json_template"),span:o,validate:{trigger:["input","trigger"],required:!0,message:e("project.node.sql_empty_tips")}},{type:"custom-parameters",field:"localParams",name:e("project.node.custom_parameters"),span:a,children:[{type:"input",field:"prop",span:10,props:{placeholder:e("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(n,i){if(!i)return new Error(e("project.node.prop_tips"));if(t.localParams.filter(p=>p.prop===i).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"input",field:"value",span:10,props:{placeholder:e("project.node.value_tips"),maxLength:256}}]},or(24),{type:"input",field:"others",name:e("project.node.option_parameters"),props:{type:"textarea",placeholder:e("project.node.option_parameters_tips")}}]}function or(t=24){const{t:e}=m();return{type:"radio",field:"deployMode",name:e("project.node.deploy_mode"),options:nr,span:t}}const nr=[{label:"local",value:"local"},{label:"standlone",value:"standlone"},{label:"yarn-session",value:"yarn-session"},{label:"yarn-per-job",value:"yarn-per-job"}];function ir(t){const{t:e}=m(),o=s(0),a=s(0),r=s(0),n=s(0),i=s(0),l=s(0),p=()=>{t.showCreateEnvironment=t.isCreateEnvironment&&t.otherParams,t.showCreateConda=!!(t.showCreateEnvironment&&t.pythonEnvTool==="conda"),t.showCreateEnv=!!(t.showCreateEnvironment&&t.pythonEnvTool==="virtualenv")},u=()=>{o.value=t.otherParams?12:0,a.value=t.otherParams?24:0,r.value=t.showCreateEnvironment?12:0,n.value=~t.showCreateEnvironment&t.otherParams?12:0,i.value=t.showCreateEnvironment?24:0,l.value=t.showCreateConda?24:0};return x(()=>[t.isCreateEnvironment,t.pythonEnvTool,t.otherParams],()=>{p(),u()}),[{type:"input",field:"script",name:e("project.node.pytorch_script"),span:24},{type:"input",field:"scriptParams",name:e("project.node.pytorch_script_params"),span:24},{type:"switch",field:"otherParams",name:e("project.node.pytorch_other_params"),span:24},{type:"input",field:"pythonPath",name:e("project.node.pytorch_python_path"),span:a},{type:"switch",field:"isCreateEnvironment",name:e("project.node.pytorch_is_create_environment"),span:o},{type:"input",field:"pythonCommand",name:e("project.node.pytorch_python_command"),span:n,props:{placeholder:e("project.node.pytorch_python_command_tips")}},{type:"select",field:"pythonEnvTool",name:e("project.node.pytorch_python_env_tool"),span:r,options:sr},{type:"input",field:"requirements",name:e("project.node.pytorch_requirements"),span:i},{type:"input",field:"condaPythonVersion",name:e("project.node.pytorch_conda_python_version"),span:l,props:{placeholder:e("project.node.pytorch_conda_python_version_tips")}},U(),...O({model:t,field:"localParams",isSimple:!1})]}const sr=[{label:"conda",value:"conda"},{label:"virtualenv",value:"virtualenv"}];function lr(t){const{t:e}=m(),o=_(()=>t.hiveCliTaskExecutionType==="SCRIPT"?24:0),a=s(t.hiveCliTaskExecutionType!=="SCRIPT"),r=_(()=>t.hiveCliTaskExecutionType==="SCRIPT"?-1:1),n=[{label:e("project.node.sql_execution_type_from_script"),value:"SCRIPT"},{label:e("project.node.sql_execution_type_from_file"),value:"FILE"}];return x(()=>t.hiveCliTaskExecutionType,()=>{a.value=t.hiveCliTaskExecutionType!=="SCRIPT"}),[{type:"select",field:"hiveCliTaskExecutionType",span:12,name:e("project.node.sql_execution_type"),options:n,validate:{trigger:["input","blur"],required:!0}},{type:"editor",field:"hiveSqlScript",name:e("project.node.hive_sql_script"),props:{language:"sql"},validate:{trigger:["input","blur"],required:!0},span:o},{type:"input",field:"hiveCliOptions",name:e("project.node.hive_cli_options"),props:{placeholder:e("project.node.hive_cli_options_tips")}},U(24,a,r),...O({model:t,field:"localParams",isSimple:!1})]}function pr(t){const e=s(0),o=s(0),a=s(0),r=s(0),n=s(0),i=s(0),l=s(0),p=s(0),u=()=>{t.isCreateAndNotJson=!t.isRestartTask&&!t.isJsonFormat,t.isRestartAndNotJson=!!(t.isRestartTask&&!t.isJsonFormat)},f=()=>{e.value=t.isJsonFormat?24:0,o.value=t.isRestartAndNotJson?24:0,l.value=t.isCreateAndNotJson?24:0,r.value=t.isCreateAndNotJson?24:0,a.value=t.isCreateAndNotJson?24:0,n.value=t.isCreateAndNotJson?24:0,i.value=t.isCreateAndNotJson?24:0,p.value=t.isCreateAndNotJson?24:0};return x(()=>[t.isRestartTask,t.isJsonFormat],()=>{u(),f()}),u(),f(),[{type:"switch",field:"isRestartTask",name:"isRestartTask",span:12},{type:"switch",field:"isJsonFormat",name:"isJsonFormat",span:12},{type:"editor",field:"jsonData",name:"jsonData",span:e},{type:"select",field:"migrationType",name:"migrationType",span:l,options:ur},{type:"input",field:"replicationTaskIdentifier",name:"replicationTaskIdentifier",span:a},{type:"input",field:"replicationInstanceArn",name:"replicationInstanceArn",span:i},{type:"input",field:"sourceEndpointArn",name:"sourceEndpointArn",span:r},{type:"input",field:"targetEndpointArn",name:"targetEndpointArn",span:n},{type:"editor",field:"tableMappings",name:"tableMappings",span:p},{type:"input",field:"replicationTaskArn",name:"replicationTaskArn",span:o},U(),...O({model:t,field:"localParams",isSimple:!1})]}const ur=[{label:"full-load",value:"full-load"},{label:"cdc",value:"cdc"},{label:"full-load-and-cdc",value:"full-load-and-cdc"}];function cr(t){const e=s(0),o=s(0),a=s(0),r=s(0),n=s(0),i=()=>{e.value=t.jsonFormat?24:0,o.value=t.jsonFormat?0:24,a.value=t.jsonFormat?0:24,r.value=t.jsonFormat?0:24,n.value=t.jsonFormat?0:24};return x(()=>[t.jsonFormat],()=>{i()}),i(),[{type:"switch",field:"jsonFormat",name:"jsonFormat",span:12},{type:"editor",field:"json",name:"json",span:e},{type:"input",field:"destinationLocationArn",name:"destinationLocationArn",span:o},{type:"input",field:"sourceLocationArn",name:"sourceLocationArn",span:a},{type:"input",field:"name",name:"name",span:r},{type:"input",field:"cloudWatchLogGroupArn",name:"cloudWatchLogGroupArn",span:n},...O({model:t,field:"localParams",isSimple:!1})]}function dr(t){return[de(),{type:"editor",field:"yamlContent",name:"yamlContent",props:{language:"yaml"},validate:{trigger:["input","trigger"],required:!0,message:"requestJson"}},...O({model:t,field:"localParams",isSimple:!1})]}function mr(t){const{t:e}=m(),o=_(()=>t.useCustom?24:0),a=_(()=>t.useCustom?0:24);return _(()=>t.useCustom?0:24),[{type:"switch",field:"useCustom",name:e("project.node.custom_config")},{type:"custom-parameters",field:"paramScript",name:e("project.node.option_parameters"),span:a,children:[{type:"input",field:"prop",span:10,props:{placeholder:e("project.node.prop_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(r,n){if(!n)return new Error(e("project.node.prop_tips"));if(t.localParams.filter(l=>l.prop===n).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"input",field:"value",span:10,props:{placeholder:e("project.node.value_tips"),maxLength:256}}]},{type:"editor",field:"rawScript",name:e("project.node.script"),span:o,validate:{trigger:["input","trigger"],required:t.useCustom,validator(r,n){if(t.useCustom&&!n)return new Error(e("project.node.script_tips"))}}},...O({model:t,field:"localParams",isSimple:!0})]}function fr(){return le({url:"/cloud/azure/datafactory/factories",method:"get"})}function yr(){return le({url:"/cloud/azure/datafactory/resourceGroups",method:"get"})}function _r(t){return le({url:"/cloud/azure/datafactory/pipelines",method:"get",params:t})}function vr(t){const{t:e}=m(),o=s(!1),a=s(!1),r=s(!1),n=s([]),i=s([]),l=s([]),p=async()=>{if(o.value)return;o.value=!0;const v=await fr();n.value=v.map(j=>({label:j,value:j})),o.value=!1},u=async()=>{if(a.value)return;a.value=!0;const v=await yr();i.value=v.map(j=>({label:j,value:j})),a.value=!1},f=async(v,j)=>{if(r.value)return;r.value=!0;const F=await _r({factoryName:v,resourceGroupName:j});l.value=F.map(Q=>({label:Q,value:Q})),r.value=!1},d=()=>{t.pipelineName="",t.factoryName&&t.resourceGroupName&&f(t.factoryName,t.resourceGroupName)};return x(()=>t.pipelineName,()=>{t.pipelineName&&l.value.length===0&&f(t.factoryName,t.resourceGroupName)}),Y(()=>{p(),u()}),[{type:"select",field:"factoryName",span:24,name:e("project.node.factory_name"),options:n,props:{"on-update:value":d,loading:o},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.factory_tips")}},{type:"select",field:"resourceGroupName",span:24,name:e("project.node.resource_group_name"),options:i,props:{"on-update:value":d,loading:a},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.resource_group_tips")}},{type:"select",field:"pipelineName",span:24,name:e("project.node.pipeline_name"),options:l,props:{loading:r},validate:{trigger:["input","trigger"],required:!0,message:e("project.node.pipeline_tips")}},...O({model:t,field:"localParams",isSimple:!0})]}function gr(t){const{t:e}=m();return[{type:"editor",field:"rawScript",name:e("project.node.script"),validate:{trigger:["input","trigger"],required:!0,message:e("project.node.script_tips")}},...O({model:t,field:"localParams",isSimple:!1})]}function jr(t){const{t:e}=m();return[{type:"input-number",field:"maxNumOfSubWorkflowInstances",span:12,name:e("project.node.max_num_of_sub_workflow_instances"),validate:{required:!0}},{type:"input-number",field:"degreeOfParallelism",span:12,name:e("project.node.parallelism"),validate:{required:!0}},{type:"custom-parameters",field:"listParameters",name:e("project.node.params_value"),span:24,children:[{type:"input",field:"name",span:8,props:{placeholder:e("project.node.dynamic_name_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dynamic_name_tips"));if(t.listParameters.filter(n=>n.name===a).length>1)return new Error(e("project.node.prop_repeat"))}}},{type:"input",field:"value",span:8,props:{placeholder:e("project.node.dynamic_value_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dynamic_value_tips"))}}},{type:"input",field:"separator",span:4,props:{placeholder:e("project.node.dynamic_separator_tips"),maxLength:256},validate:{trigger:["input","blur"],required:!0,validator(o,a){if(!a)return new Error(e("project.node.dynamic_separator_tips"))}}}]},{type:"input",field:"filterCondition",span:24,name:e("project.node.filter_condition")}]}function te(){const{t}=m();return{type:"input",field:"yarnQueue",name:t("project.node.yarn_queue"),span:12,props:{placeholder:t("project.node.yarn_queue_tips")}}}function Tr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"FLINK",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",deployMode:"cluster",initScript:"",rawScript:"",flinkVersion:"<1.10",jobManagerMemory:"1G",taskManagerMemory:"2G",slot:1,taskManager:2,parallelism:1,timeoutNotifyStrategy:["WARN"],yarnQueue:""});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...Ae(r),P()],model:r}}function br({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"FLINK_STREAM",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",deployMode:"cluster",initScript:"",rawScript:"",flinkVersion:"<1.10",jobManagerMemory:"1G",taskManagerMemory:"2G",slot:1,taskManager:2,parallelism:1,timeoutNotifyStrategy:["WARN"],yarnQueue:""});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),M(r),...Ae(r),P()],model:r}}function hr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"SHELL",name:"",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,rawScript:""});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...Re(r),P()],model:r}}function Sr({projectCode:t,from:e=0,readonly:o,data:a}){const n=se().currentRoute.value.params.code,i=h({taskType:"SUB_PROCESS",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:i}),L(),N(),S(),E(),w(i,!(a!=null&&a.id)),...A(i,t),...C(i),he({model:i,projectCode:t,from:e,processName:a==null?void 0:a.processName,code:e===1?0:Number(n)}),P()],model:i}}function Er({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"PIGEON",name:"",flag:"YES",description:"",timeoutFlag:!1,environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,targetJobName:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),Ke(),P()],model:r}}function wr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"PYTHON",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,rawScript:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...Re(r),P()],model:r}}function kr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"SPARK",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",rawScript:"",deployMode:"local",driverCores:1,driverMemory:"512M",numExecutors:2,executorMemory:"2G",executorCores:2,yarnQueue:"",timeoutNotifyStrategy:["WARN"],sqlExecutionType:"SCRIPT"});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...dt(r),P()],model:r}}function Lr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"MR",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"SCALA",timeoutNotifyStrategy:["WARN"],yarnQueue:""});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...ft(r),P()],model:r}}function Nr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"HTTP",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,httpMethod:"GET",httpCheckCondition:"STATUS_CODE_DEFAULT",httpParams:[],url:"",condition:"",connectTimeout:6e4,socketTimeout:6e4,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...gt(r),P()],model:r}}function Pr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"SQL",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:"MYSQL",displayRows:10,sql:"",sqlType:"0",preStatements:[],postStatements:[],udfs:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...z(r),...ze(r),...ht(r),P()],model:r}}function Rr({projectCode:t,from:e=0,readonly:o,data:a}){var n,i,l,p;const r=h({name:"",taskType:"PROCEDURE",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,type:(n=a==null?void 0:a.taskParams)!=null&&n.type?(i=a==null?void 0:a.taskParams)==null?void 0:i.type:"MYSQL",datasource:(l=a==null?void 0:a.taskParams)==null?void 0:l.datasource,method:(p=a==null?void 0:a.taskParams)==null?void 0:p.method,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...z(r),...Ze(r),P()],model:r}}function Ar({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"SQOOP",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,isCustomTask:!1,hadoopCustomParams:[],sqoopAdvancedParams:[],mapColumnHive:[],mapColumnJava:[],modelType:"import",sourceType:"MYSQL",srcQueryType:"1",srcColumnType:"0",targetType:"HDFS",sourceMysqlType:"MYSQL",targetHdfsDeleteTargetDir:!0,targetHdfsCompressionCodec:"snappy",targetHdfsFileType:"--as-avrodatafile",targetMysqlType:"MYSQL",targetMysqlUpdateMode:"allowinsert",targetHiveCreateTable:!1,targetHiveDropDelimiter:!1,targetHiveOverWrite:!0,concurrency:1,splitBy:"",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...St(r),P()],model:r}}function Cr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"SEATUNNEL",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,startupScript:"seatunnel.sh",runMode:"RUN",useCustom:!0,deployMode:"client",master:"YARN",masterUrl:"",resourceFiles:[],timeoutNotifyStrategy:["WARN"],rawScript:`env {
  execution.parallelism = 2
  job.mode = "BATCH"
  checkpoint.interval = 10000
}

source {
  FakeSource {
    parallelism = 2
    result_table_name = "fake"
    row.num = 16
    schema = {
      fields {
        name = "string"
        age = "int"
      }
    }
  }
}

sink {
  Console {
  }
}`});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...wt(r),P()],model:r}}function Ir({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"SWITCH",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,rawScript:"",switchResult:{},dependTaskList:[],nextNode:void 0,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...Pt(r,t),P()],model:r}}function Mr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"CONDITIONS",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",timeout:30,relation:"AND",dependTaskList:[],preTasks:[],successNode:"success",failedNode:"failed",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...At(r),P()],model:r}}function qr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"DATAX",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,customConfig:!1,dsType:"MYSQL",dtType:"MYSQL",preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...Rt(r),P()],model:r}}function Dr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({taskType:"DEPENDENT",name:"",flag:"YES",description:"",timeoutShowFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,relation:"AND",dependTaskList:[],preTasks:[],timeoutNotifyStrategy:[],timeout:30,timeoutFlag:!1,failurePolicy:"DEPENDENT_FAILURE_FAILURE",checkInterval:10,...a});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...Ct(r),P()],model:r}}function Or({projectCode:t,from:e=0,readonly:o,data:a,jsonRef:r,updateElements:n}){const{t:i}=m(),l=h({taskType:"DATA_QUALITY",name:"",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,ruleId:1,deployMode:"cluster",driverCores:1,driverMemory:"512M",numExecutors:2,executorMemory:"2G",executorCores:2,others:"--conf spark.yarn.maxAppAttempts=1",yarnQueue:""});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:l}),L(),q(),N(),S(),E(),w(l,!(a!=null&&a.id)),...A(l,t),...I(),M(l),...C(l),...ut(l,(p,u)=>{r.value.splice(15,u,...p),n()}),ue(),we(),ke(),Le(),Ne(),Pe(),te(),{type:"input",field:"others",name:i("project.node.option_parameters"),props:{type:"textarea",placeholder:i("project.node.option_parameters_tips")}},...O({model:l,field:"localParams",isSimple:!0}),P()],model:l}}function Fr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"EMR",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,programType:"ADD_JOB_FLOW_STEPS",timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...It(r),P()],model:r}}function xr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"ZEPPELIN",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...qt(r),P()],model:r}}function Hr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"K8S",flag:"YES",description:"",timeoutFlag:!1,localParams:[],customizedLabels:[],nodeSelectors:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...Dt(r),P()],model:r}}function Yr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"JUPYTER",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...Ft(r),P()],model:r}}function Ur({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",algorithm:"svm",mlflowTrackingUri:"http://127.0.0.1:5000",mlflowTaskType:"MLflow Projects",deployType:"MLFLOW",deployPort:"7000",mlflowJobType:"CustomProject",automlTool:"flaml",mlflowCustomProjectParameters:[],delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...Ht(r),P()],model:r}}function Gr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"OPENMLDB",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,zk:"",zkPath:"",executeMode:"offline"});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...Kt(r),P()],model:r}}function Jr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],dvcTaskType:"Upload"});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...Xt(r),P()],model:r}}function Qr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"JAVA",flag:"YES",description:"",localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,isModulePath:!1,rawScript:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,mainJar:void 0,runType:"JAVA",mainArgs:"",jvmArgs:"",programType:"JAVA"});let n=[];return e===1&&(n=[B(r,o),K({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...tr(r),P()],model:r}}function Vr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"DINKY",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...Zt(r),P()],model:r}}function Wr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"MLFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...er(r),P()],model:r}}function $r({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"CHUNJUN",flag:"YES",description:"",deployMode:"local",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,customConfig:!0,preStatements:[],postStatements:[],timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...ar(r),P()],model:r}}function Br({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"PYTORCH",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],pythonEnvTool:"conda",pythonCommand:"${PYTHON_LAUNCHER}",condaPythonVersion:"3.7",requirements:"requirements.txt",pythonPath:"."});let n=[];return e===1&&(n=[B(r,o),K({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...ir(r),P()],model:r}}function Kr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"HIVECLI",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,hiveCliTaskExecutionType:"SCRIPT"});let n=[];return e===1&&(n=[B(r,o),K({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...lr(r),P()],model:r}}function zr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"DMS",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],isRestartTask:!1});let n=[];return e===1&&(n=[B(r,o),K({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...pr(r),P()],model:r}}function Xr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"DATASYNC",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});let n=[];return e===1&&(n=[B(r,o),K({model:r,projectCode:t,isCreate:!(a!=null&&a.id),from:e,processName:a==null?void 0:a.processName})]),{json:[k(e),...n,L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...cr(r),P()],model:r}}function Zr({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"KUBEFLOW",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"]});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...dr(r),P()],model:r}}function ea({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"LINKIS",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",cpuQuota:-1,memoryMax:-1,delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],useCustom:!1,paramScript:[{prop:"",value:""}],rawScript:""});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...mr(r),P()],model:r}}function ta({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"DATA_FACTORY",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,timeoutNotifyStrategy:["WARN"],factoryName:"",resourceGroupName:"",pipelineName:""});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),M(r),...C(r),...vr(r),P()],model:r}}function ra({projectCode:t,from:e=0,readonly:o,data:a}){const r=h({name:"",taskType:"REMOTESHELL",flag:"YES",description:"",timeoutFlag:!1,timeoutNotifyStrategy:["WARN"],timeout:30,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,type:"SSH",rawScript:""});return{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:r}),L(),q(),N(),S(),E(),w(r,!(a!=null&&a.id)),...A(r,t),...I(),...G(),M(r),...C(r),...z(r,{supportedDatasourceType:["SSH"]}),...gr(r),P()],model:r}}function aa({projectCode:t,from:e=0,readonly:o,data:a}){var l;const n=se().currentRoute.value.params.code,i=h({taskType:"DYNAMIC",name:"",flag:"YES",description:"",timeoutFlag:!1,localParams:[],environmentCode:null,failRetryInterval:1,failRetryTimes:0,workerGroup:"default",delayTime:0,timeout:30,maxNumOfSubWorkflowInstances:1024,degreeOfParallelism:1,filterCondition:"",listParameters:[{name:null,value:null,separator:","}]});return(l=i.listParameters)!=null&&l.length&&(i.listParameters[0].disabled=!0),{json:[k(e),...D({projectCode:t,from:e,readonly:o,data:a,model:i}),L(),N(),S(),E(),w(i,!(a!=null&&a.id)),...A(i,t),...C(i),he({model:i,projectCode:t,from:e,processName:a==null?void 0:a.processName,code:e===1?0:Number(n)}),...jr(i),P()],model:i}}const oa={SHELL:hr,SUB_PROCESS:Sr,DYNAMIC:aa,PYTHON:wr,SPARK:kr,MR:Lr,FLINK:Tr,HTTP:Nr,PIGEON:Er,SQL:Pr,PROCEDURE:Rr,SQOOP:Ar,SEATUNNEL:Cr,SWITCH:Ir,CONDITIONS:Mr,DATAX:qr,DEPENDENT:Dr,DATA_QUALITY:Or,EMR:Fr,ZEPPELIN:xr,K8S:Hr,JUPYTER:Yr,MLFLOW:Ur,OPENMLDB:Gr,DVC:Jr,DINKY:Vr,SAGEMAKER:Wr,CHUNJUN:$r,FLINK_STREAM:br,JAVA:Qr,PYTORCH:Br,HIVECLI:Kr,DMS:zr,DATASYNC:Xr,KUBEFLOW:Zr,LINKIS:ea,DATA_FACTORY:ta,REMOTESHELL:ra};function na({data:t,projectCode:e,from:o,readonly:a,definition:r}){const n=J();n.updateDefinition(oe(r),t==null?void 0:t.code);const i=s([]),l=s([]),p=s({}),u={projectCode:e,from:o,readonly:a,data:t,jsonRef:i,updateElements:()=>{v()}},{model:f,json:d}=oa[t.taskType||"SHELL"](u);i.value=d,f.preTasks=n.getPreTasks,f.name=n.getName,f.taskExecuteType=ge[t.taskType||"SHELL"].taskExecuteType||"BATCH";const v=()=>{const{rules:j,elements:F}=Ce(i.value,f);l.value=F,p.value=j};return v(),{elementsRef:l,rulesRef:p,model:f}}const So=qe({name:"NodeDetail",emits:["taskTypeChange"],setup(t,{expose:e,emit:o}){const a=J(),r=s(),n=De("data")||{projectCode:0,data:{taskType:"SHELL"},readonly:!1,from:0},{data:i,projectCode:l,from:p,readonly:u,definition:f}=oe(n),{elementsRef:d,rulesRef:v,model:j}=na({data:i,projectCode:l,from:p,readonly:u,definition:f});return x(()=>j.taskType,async F=>{a.updateName(j.name||""),o("taskTypeChange",F)}),e(r),()=>Oe(Ie,{ref:r,meta:{model:j,rules:v.value,elements:d.value,disabled:oe(u)},layout:{xGap:10}},null)}});export{So as default};
