import{S as r}from"./dag.module.6dc78b46.js";import{s as _}from"./service.4be3af67.js";import{d as $,t as u,g as y,i as D,h as f,f as P,bQ as K,m as A,a as Q,n as z,l as U,B as G,U as q,s as Z,y as J,ck as X,z as Y,G as k,ac as ee,H as le,a5 as te,_ as ae,A as re,bu as oe,N as ne,aL as se,u as ie,e as ce,c as l}from"./index.851b5188.js";import{u as de}from"./use-merged-state.e40d3a9f.js";import{c as M,b as j,d as ue}from"./resolve-slot.9e6a0162.js";import{u as pe}from"./use-false-until-truthy.5d7093c9.js";import{C as me}from"./ChevronRight.d6536995.js";import{S as C,a as x}from"./StarOutlined.2ad53855.js";import{N as b}from"./Icon.afc45566.js";import"./ui-setting.39219f0f.js";import"./lodash.68b7405b.js";import"./format-length.d7d829b3.js";const fe=$({name:"ChevronLeft",render(){return u("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),ge=y("collapse","width: 100%;",[y("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[D("disabled",[f("header","cursor: not-allowed;",[f("header-main",`
 color: var(--n-title-text-color-disabled);
 `),y("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),y("collapse-item","margin-left: 32px;"),P("&:first-child","margin-top: 0;"),P("&:first-child >",[f("header","padding-top: 0;")]),D("left-arrow-placement",[f("header",[y("collapse-item-arrow","margin-right: 4px;")])]),D("right-arrow-placement",[f("header",[y("collapse-item-arrow","margin-left: 4px;")])]),f("content-wrapper",[f("content-inner","padding-top: 16px;"),K({duration:"0.15s"})]),D("active",[f("header",[D("active",[y("collapse-item-arrow","transform: rotate(90deg);")])])]),P("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),f("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: 16px 0 0 0;
 color: var(--n-title-text-color);
 cursor: pointer;
 `,[f("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),f("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),y("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),ve=Object.assign(Object.assign({},U.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),B=J("n-collapse"),he=$({name:"Collapse",props:ve,setup(o,{slots:i}){const{mergedClsPrefixRef:t,inlineThemeDisabled:s,mergedRtlRef:p}=A(o),n=Q(o.defaultExpandedNames),e=z(()=>o.expandedNames),a=de(e,n),N=U("Collapse","-collapse",ge,X,o,t);function g(v){const{"onUpdate:expandedNames":c,onUpdateExpandedNames:h,onExpandedNamesChange:F}=o;h&&M(h,v),c&&M(c,v),F&&M(F,v),n.value=v}function m(v){const{onItemHeaderClick:c}=o;c&&M(c,v)}function d(v,c,h){const{accordion:F}=o,{value:E}=a;if(F)v?(g([c]),m({name:c,expanded:!0,event:h})):(g([]),m({name:c,expanded:!1,event:h}));else if(!Array.isArray(E))g([c]),m({name:c,expanded:!0,event:h});else{const L=E.slice(),I=L.findIndex(T=>c===T);~I?(L.splice(I,1),g(L),m({name:c,expanded:!1,event:h})):(L.push(c),g(L),m({name:c,expanded:!0,event:h}))}}G(B,{props:o,mergedClsPrefixRef:t,expandedNamesRef:a,slots:i,toggleItem:d});const H=q("Collapse",p,t),R=z(()=>{const{common:{cubicBezierEaseInOut:v},self:{titleFontWeight:c,dividerColor:h,titleTextColor:F,titleTextColorDisabled:E,textColor:L,arrowColor:I,fontSize:T,titleFontSize:O,arrowColorDisabled:V,itemMargin:W}}=N.value;return{"--n-font-size":T,"--n-bezier":v,"--n-text-color":L,"--n-divider-color":h,"--n-title-font-size":O,"--n-title-text-color":F,"--n-title-text-color-disabled":E,"--n-title-font-weight":c,"--n-arrow-color":I,"--n-arrow-color-disabled":V,"--n-item-margin":W}}),S=s?Z("collapse",void 0,R,o):void 0;return{rtlEnabled:H,mergedTheme:N,mergedClsPrefix:t,cssVars:s?void 0:R,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender}},render(){var o;return(o=this.onRender)===null||o===void 0||o.call(this),u("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),ye=$({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(o){return{onceTrue:pe(Y(o,"show"))}},render(){return u(ee,null,{default:()=>{const{show:o,displayDirective:i,onceTrue:t,clsPrefix:s}=this,p=i==="show"&&t,n=u("div",{class:`${s}-collapse-item__content-wrapper`},u("div",{class:`${s}-collapse-item__content-inner`},this.$slots));return p?k(n,[[le,o]]):o?n:null}})}}),Ce={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},w=$({name:"CollapseItem",props:Ce,setup(o){const{mergedRtlRef:i}=A(o),t=te(),s=ae(()=>{var d;return(d=o.name)!==null&&d!==void 0?d:t}),p=re(B);p||oe("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:n,props:e,mergedClsPrefixRef:a,slots:N}=p,g=z(()=>{const{value:d}=n;if(Array.isArray(d)){const{value:H}=s;return!~d.findIndex(R=>R===H)}else if(d){const{value:H}=s;return H!==d}return!0});return{rtlEnabled:q("Collapse",i,a),collapseSlots:N,randomName:t,mergedClsPrefix:a,collapsed:g,mergedDisplayDirective:z(()=>{const{displayDirective:d}=o;return d||e.displayDirective}),arrowPlacement:z(()=>e.arrowPlacement),handleClick(d){p&&!o.disabled&&p.toggleItem(g.value,s.value,d)}}},render(){const{collapseSlots:o,$slots:i,arrowPlacement:t,collapsed:s,mergedDisplayDirective:p,mergedClsPrefix:n,disabled:e}=this,a=j(i.header,{collapsed:s},()=>[this.title]),N=i["header-extra"]||o["header-extra"],g=i.arrow||o.arrow;return u("div",{class:[`${n}-collapse-item`,`${n}-collapse-item--${t}-arrow-placement`,e&&`${n}-collapse-item--disabled`,!s&&`${n}-collapse-item--active`]},u("div",{class:[`${n}-collapse-item__header`,!s&&`${n}-collapse-item__header--active`]},u("div",{class:`${n}-collapse-item__header-main`,onClick:this.handleClick},t==="right"&&a,u("div",{class:`${n}-collapse-item-arrow`,key:this.rtlEnabled?0:1},j(g,{collapsed:s},()=>{var m;return[u(ne,{clsPrefix:n},{default:(m=o.expandIcon)!==null&&m!==void 0?m:()=>this.rtlEnabled?u(fe,null):u(me,null)})]})),t==="left"&&a),ue(N,{collapsed:s},m=>u("div",{class:`${n}-collapse-item__header-extra`,onClick:this.handleClick},m))),u(ye,{clsPrefix:n,displayDirective:p,show:!s},i))}});function xe(){return _({url:"/favourite/taskTypes",method:"get"})}function be(o){return _({url:`/favourite/${o}`,method:"post"})}function we(o){return _({url:`/favourite/${o}`,method:"delete"})}const Te=$({name:"workflow-dag-sidebar",emits:["dragStart"],setup(o,i){const t=se({dataList:[],universal:[],cloud:[],logic:[],di:[],dq:[],ml:[],other:[],fav:[]}),{t:s}=ie(),p=()=>{xe().then(e=>{t.dataList=e.map(a=>({...a,starHover:!1,type:a.taskType})),t.universal=t.dataList.filter(a=>a.taskCategory==="Universal"),t.cloud=t.dataList.filter(a=>a.taskCategory==="Cloud"),t.logic=t.dataList.filter(a=>a.taskCategory==="Logic"),t.di=t.dataList.filter(a=>a.taskCategory==="DataIntegration"),t.dq=t.dataList.filter(a=>a.taskCategory==="DataQuality"),t.ml=t.dataList.filter(a=>a.taskCategory==="MachineLearning"),t.other=t.dataList.filter(a=>a.taskCategory==="Other"),t.fav=t.dataList.filter(a=>a.collection===!0)})},n=e=>{e.collection?we(e.taskType).then(()=>{p()}):be(e.taskType).then(()=>{p()}),e.collection=!e.collection};return ce(()=>{p()}),()=>l("div",{class:r.sidebar},[l(he,{"default-expanded-names":"1",accordion:!0},{default:()=>[t.fav.length>0&&l(w,{title:s("project.menu.fav"),name:"0",class:"task-cate-fav"},{default:()=>t.fav.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.universal.length>0&&l(w,{title:s("project.menu.universal"),name:"1",class:"task-cate-universal"},{default:()=>t.universal.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.cloud.length>0&&l(w,{title:s("project.menu.cloud"),name:"2",class:"task-cate-cloud"},{default:()=>t.cloud.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.logic.length>0&&l(w,{title:s("project.menu.logic"),name:"3",class:"task-cate-logic"},{default:()=>t.logic.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.di.length>0&&l(w,{title:s("project.menu.di"),name:"4",class:"task-cate-di"},{default:()=>t.di.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.dq.length>0&&l(w,{title:s("project.menu.dq"),name:"5",class:"task-cate-dq"},{default:()=>t.dq.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.ml.length>0&&l(w,{title:s("project.menu.ml"),name:"6",class:"task-cate-ml"},{default:()=>t.ml.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))}),t.other.length>0&&l(w,{title:s("project.menu.other"),name:"7",class:"task-cate-other"},{default:()=>t.other.map(e=>l("div",{class:[r.draggable,`task-item-${e.type}`],draggable:"true",onDragstart:a=>{i.emit("dragStart",a,e.type)}},[l("em",{class:[r["sidebar-icon"],r["icon-"+e.type.toLocaleLowerCase()]]},null),l("span",null,[e.taskType]),l("div",{class:r.stars,onMouseenter:()=>{e.starHover=!0},onMouseleave:()=>{e.starHover=!1},onClick:()=>n(e)},[l(b,{size:"20",color:e.collection||e.starHover?"#288FFF":"#ccc"},{default:()=>[e.collection?l(C,null,null):l(x,null,null)]})])]))})]})])}});export{Te as default};
