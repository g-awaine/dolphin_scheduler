import{G as l}from"./index.6abc819d.js";import{l as v}from"./lodash.68b7405b.js";import{a as _}from"./index.73124cc7.js";import{bs as N,d as b,a as r,e as k,w as z,c as i,V as S}from"./index.851b5188.js";function T(e,t){const a=v.exports.debounce(()=>{if(e){const n=e.offsetWidth,s=e.offsetHeight;t.resize(n,s)}},200);_(e,a)}function j(e,t){return new l({container:e,scroller:!0,grid:{size:10,visible:!0},minimap:{enabled:!0,width:200,height:120,container:t}})}const u="dag-node",V="200",W="50",w="rect";function P(){return{inherit:w}}const g=N({id:"dag-store",state:()=>({tasks:[]}),persist:!0,getters:{getDagTasks(){return this.tasks}},actions:{setDagTasks(e){this.tasks=e}}});function C(e){const t=g().getDagTasks;e.addNode(t.at(-1))}const G="_container_14j0i_17",y="_minimap_14j0i_27",d={container:G,"dag-container":"_dag-container_14j0i_22",minimap:y},O=b({name:"DagCanvas",emits:["drop"],setup(e,t){const a=r(),n=r(),s=r(),o=r(),p=g().getDagTasks;o.value&&T(n.value,o.value);const h=()=>{o.value=j(a.value,s.value)},m=()=>{l.unregisterNode(u),l.registerNode(u,P())},f=c=>{c.preventDefault()},D=c=>{t.emit("drop",c)};return k(()=>{h(),m()}),z(p,()=>{C(o.value)}),{container:a,"dag-container":n,minimapContainer:s,handlePreventDefault:f,handleDrop:D}},render(){return i(S,null,[i("div",{ref:"container",class:d.container,onDrop:this.handleDrop,onDragenter:this.handlePreventDefault,onDragover:this.handlePreventDefault,onDragleave:this.handlePreventDefault},[i("div",{ref:"dag-container",class:d["dag-container"]},null)]),i("div",{ref:"minimapContainer",class:d.minimap},null)])}}),A=Object.freeze(Object.defineProperty({__proto__:null,DagCanvas:O},Symbol.toStringTag,{value:"Module"}));export{O as D,V as N,W as a,w as b,A as d,g as u};
