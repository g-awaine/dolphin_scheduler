import{u as l,aL as p,a as f,be as d,d as F,at as h,w as g,ba as N,c as s}from"./index.851b5188.js";import{M as w}from"./index.e69e8738.js";import{f as R}from"./index.59799c67.js";import{N as v}from"./Form.9f7fa8c1.js";import{N as b}from"./FormItem.f5b3f80b.js";import{N as y}from"./Input.79ba0d48.js";import"./index.8acb741a.js";import"./Button.4e249408.js";import"./is-browser.45c3bd93.js";import"./use-form-item.bb4d7ada.js";import"./resolve-slot.9e6a0162.js";import"./keysOf.ab13e590.js";import"./Card.19bc42e2.js";import"./index.7a579f81.js";import"./index.e739cd60.js";import"./flatten.05a2e46f.js";import"./Scrollbar.7a99b971.js";import"./fade-in.cssr.55dfcced.js";import"./VResizeObserver.6721b9ea.js";import"./use-false-until-truthy.5d7093c9.js";import"./fade-in-scale-up.cssr.5737b1c6.js";import"./utils.f449ed5c.js";import"./index.3ef69258.js";import"./Space.f9ece73f.js";import"./get-slot.80096ab3.js";import"./service.4be3af67.js";import"./ui-setting.39219f0f.js";import"./lodash.68b7405b.js";import"./format-length.d7d829b3.js";import"./get.aa32335f.js";import"./use-locale.f8ac8f2c.js";import"./use-merged-state.e40d3a9f.js";import"./Suffix.21a8a87f.js";const c=(e,t="",r="",a="",n="")=>({fullName:t,name:r,type:e,description:a,user_name:n});function C(e,t,r,a,n){const{t:m}=l(),i=()=>{o.renameForm=Object.assign(d(o.renameForm),c(e))},o=p({renameFormRef:f(),renameForm:c(e,t,r,a,n),saving:!1,rules:{name:{required:!0,trigger:["input","blur"],validator(){if(o.renameForm.name==="")return new Error(m("resource.file.enter_name_tips"))}}}});return{state:o,resetForm:i}}function _(e){const{t}=l();return{handleRenameFile:async(a,n,m)=>{if(await e.renameFormRef.validate(),!e.saving){e.saving=!0;try{await R({...e.renameForm,tenantCode:e.renameForm.user_name}),window.$message.success(t("resource.file.success")),e.saving=!1,a("updateList"),n(),m()}catch{e.saving=!1}}}}}const I={show:{type:Boolean,default:!1},resourceType:{type:String,default:void 0},name:{type:String,default:""},description:{type:String,default:""},fullName:{type:String,default:""},userName:{type:String,default:""}},oe=F({name:"ResourceFileRename",props:I,emits:["updateList","update:show"],setup(e,t){var u;const{state:r,resetForm:a}=C(e.resourceType,e.fullName,e.name,e.description,e.userName),{handleRenameFile:n}=_(r),m=()=>{t.emit("update:show",!1)},i=()=>{n(t.emit,m,a)},o=(u=h())==null?void 0:u.appContext.config.globalProperties.trim;return g(()=>e.show,()=>{r.renameForm.fullName=e.fullName,r.renameForm.name=e.name,r.renameForm.description=e.description,r.renameForm.user_name=e.userName}),{hideModal:m,handleFile:i,...N(r),trim:o}},render(){const{t:e}=l();return s(w,{show:this.$props.show,title:e("resource.file.rename"),onCancel:this.hideModal,onConfirm:this.handleFile,confirmClassName:"btn-submit",cancelClassName:"btn-cancel",confirmLoading:this.saving},{default:()=>[s(v,{rules:this.rules,ref:"renameFormRef"},{default:()=>[s(b,{label:e("resource.file.name"),path:"name"},{default:()=>[s(y,{allowInput:this.trim,value:this.renameForm.name,"onUpdate:value":t=>this.renameForm.name=t,placeholder:e("resource.file.enter_name_tips"),class:"input-name"},null)]})]})]})}});export{oe as default};
