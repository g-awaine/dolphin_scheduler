import{u as S,aL as D,a as p,t as z,d as R,at as v,e as C,ba as P,c as t}from"./index.851b5188.js";import{u as k}from"./index.73124cc7.js";import{q as w}from"./index.1abd1843.js";import M from"./table-action.93c3de6c.js";import{_ as V}from"./lodash.68b7405b.js";import{p as _}from"./common.ee372ad3.js";import{f as N}from"./index.d671386a.js";import{C as T}from"./index.6c124806.js";import{S as U}from"./index.94a7e931.js";import E from"./rule-modal.34acf159.js";import{S as H}from"./SearchOutlined.3b9a5586.js";import{N as L,a as j}from"./DataTable.0e9ec324.js";import{N as g}from"./Space.f9ece73f.js";import{N as I}from"./Button.4e249408.js";import{N as x}from"./Icon.afc45566.js";import"./service.4be3af67.js";import"./ui-setting.39219f0f.js";import"./Tooltip.52cb9ce9.js";import"./Popover.30015336.js";import"./index.e739cd60.js";import"./flatten.05a2e46f.js";import"./Scrollbar.7a99b971.js";import"./fade-in.cssr.55dfcced.js";import"./VResizeObserver.6721b9ea.js";import"./use-false-until-truthy.5d7093c9.js";import"./_baseMap.9542141b.js";import"./get.aa32335f.js";import"./utils.f449ed5c.js";import"./format-length.d7d829b3.js";import"./resolve-slot.9e6a0162.js";import"./use-merged-state.e40d3a9f.js";import"./use-compitable.ae5454ac.js";import"./next-frame-once.e5ee25e8.js";import"./InfoCircleFilled.b53f03a6.js";import"./is-browser.45c3bd93.js";import"./use-form-item.bb4d7ada.js";import"./get-slot.80096ab3.js";import"./index.7a579f81.js";import"./SettingOutlined.e20148d7.js";import"./PauseCircleOutlined.28d888d0.js";import"./CloseCircleOutlined.9e282d8c.js";import"./CheckCircleOutlined.67794958.js";import"./EditOutlined.e0b6da4a.js";import"./Card.19bc42e2.js";import"./keysOf.ab13e590.js";import"./Input.79ba0d48.js";import"./use-locale.f8ac8f2c.js";import"./Suffix.21a8a87f.js";import"./index.e69e8738.js";import"./index.8acb741a.js";import"./fade-in-scale-up.cssr.5737b1c6.js";import"./index.3ef69258.js";import"./ArrowDown.45f9e719.js";import"./Checkbox.98b84c16.js";import"./RadioGroup.c3ead4f3.js";import"./Radio.fc32ca3b.js";import"./Dropdown.4af83811.js";import"./ChevronRight.d6536995.js";import"./Selection.28a32045.js";import"./use-keyboard.f4d2f0c0.js";import"./Ellipsis.b13f7726.js";import"./Select.3e0f2c28.js";import"./Forward.bddcd6d4.js";function q(m=e=>{}){const{t:e}=S(),r=D({tableData:[],page:p(1),pageSize:p(10),state:p(null),searchVal:"",totalPage:p(1),loadingRef:p(!1)}),l=[{title:e("data_quality.rule.name"),key:"ruleName"},{title:e("data_quality.rule.type"),key:"ruleTypeName"},{title:e("data_quality.rule.username"),key:"userName"},{title:e("data_quality.rule.create_time"),key:"createTime"},{title:e("data_quality.rule.update_time"),key:"updateTime"},{title:e("data_quality.rule.actions"),key:"actions",width:150,render:o=>z(M,{row:o,onViewRuleEntry:s=>{m(s)}})}],n=[{code:-1,label:e("data_quality.rule.all")},{code:0,label:e("data_quality.rule.single_table")},{code:1,label:e("data_quality.rule.custom_sql")},{code:2,label:e("data_quality.rule.multi_table_accuracy")},{code:3,label:e("data_quality.rule.multi_table_value_comparison")}];return{t:e,variables:r,getTableData:o=>{if(r.loadingRef)return;r.loadingRef=!0;const s={pageSize:o.pageSize,pageNo:o.pageNo,searchVal:o.searchVal,startDate:o.startDate,endDate:o.endDate},{state:d}=k(w(s).then(c=>{r.totalPage=c.totalPage,r.tableData=c.totalList.map((a,i)=>{const f="data_quality.rule."+a.name.substring(3,a.name.length-1),y=e(f),h=V.find(n,{code:a.type});let b="";return h&&(b=h.label),a.createTime=N(_(a.createTime),"yyyy-MM-dd HH:mm:ss"),a.updateTime=N(_(a.updateTime),"yyyy-MM-dd HH:mm:ss"),{...a,ruleName:y,ruleTypeName:b}}),r.loadingRef=!1}),{});return d},columns:l}}const Xe=R({name:"rule",setup(){var f;const{t:m,variables:e,getTableData:r}=q(),l=p(!1),n=p(""),u=()=>{r({pageSize:e.pageSize,pageNo:e.page,startDate:"",endDate:"",searchVal:e.searchVal})},o=()=>{e.page=1,u()},s=()=>{u()},d=()=>{l.value=!1},c=()=>{l.value=!1},a=y=>{l.value=!0,n.value=y},i=(f=v())==null?void 0:f.appContext.config.globalProperties.trim;return C(()=>{u()}),{t:m,...P(e),requestTableData:u,onUpdatePageSize:o,showModalRef:l,onCancel:d,onConfirm:c,onSearch:s,ruleEntryData:n,viewRuleEntry:a,trim:i}},render(){const{t:m,showModalRef:e,requestTableData:r,onUpdatePageSize:l,onSearch:n,onCancel:u,onConfirm:o,viewRuleEntry:s,ruleEntryData:d,loadingRef:c}=this,{columns:a}=q(s);return t(g,{vertical:!0},{default:()=>[t(T,null,{default:()=>[t(g,{justify:"end"},{default:()=>[t(U,{value:this.searchVal,"onUpdate:value":i=>this.searchVal=i,placeholder:m("data_quality.rule.name"),onSearch:n},null),t(I,{size:"small",type:"primary",onClick:n},{default:()=>[t(x,null,{default:()=>[t(H,null,null)]})]})]})]}),t(T,{title:m("menu.rule")},{default:()=>[t(g,{vertical:!0},{default:()=>[t(L,{loading:c,columns:a,data:this.tableData},null),t(g,{justify:"center"},{default:()=>[t(j,{page:this.page,"onUpdate:page":i=>this.page=i,"page-size":this.pageSize,"onUpdate:page-size":i=>this.pageSize=i,"page-count":this.totalPage,"show-size-picker":!0,"page-sizes":[10,30,50],"show-quick-jumper":!0,onUpdatePage:r,onUpdatePageSize:l},null)]})]})]}),e&&t(E,{show:e,onCancel:u,onConfirm:o,data:d},null)]})}});export{Xe as default};
