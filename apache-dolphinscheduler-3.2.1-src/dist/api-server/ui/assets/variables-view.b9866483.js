import{d as j,a as x,bI as C,n as g,e as N,u as V,c as a,ai as p,al as $}from"./index.851b5188.js";import{v as O}from"./index.4701b8ec.js";import{c as R}from"./index.23da2c90.js";import{N as b}from"./Button.4e249408.js";import"./service.4be3af67.js";import"./ui-setting.39219f0f.js";import"./lodash.68b7405b.js";import"./is-browser.45c3bd93.js";import"./use-form-item.bb4d7ada.js";import"./resolve-slot.9e6a0162.js";const B="_variable_atwg8_17",E="_list_atwg8_21",A="_name_atwg8_32",S="_fa_atwg8_35",r={variable:B,list:E,"var-cont":"_var-cont_atwg8_25",name:A,fa:S,"list-t":"_list-t_atwg8_54","task-name":"_task-name_atwg8_58"};function k(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!$(i)}const H=j({name:"variables-view",emits:["copy"],setup(i,e){const t=x(),m=C(),u=Number(m.params.projectCode),d=Number(m.params.id),f=Number(m.params.code),_=g(()=>t.value&&t.value.globalParams?t.value.globalParams:[]),h=g(()=>t.value&&t.value.localParams?t.value.localParams:{}),y=()=>{Number.isNaN(d)?R(u,f).then(s=>{t.value=s}):O(d,u).then(s=>{t.value=s})},v=s=>{e.emit("copy",s)},w=(s,n)=>{const l=[];return Object.keys(s).forEach(o=>{n==="SQL"||n==="PROCEDURE"?o!=="direct"&&o!=="type"&&l.push(`${o}=${s[o]}`):l.push(`${o}=${s[o]}`)}),l.join(" ")},P=(s,n,l)=>{let o;return a(b,{key:s,type:"primary",style:"margin-right: 10px",onClick:()=>v(w(l,n))},k(o=Object.keys(l).map(c=>n==="SQL"||n==="PROCEDURE"?c!=="direct"&&c!=="type"?a("span",{style:"margin-right: 5px"},[a("strong",{style:"color: #2A455B;"},[c]),p(" = "),l[c]]):"":a("span",{style:"margin-right: 5px"},[a("strong",{style:"color: #2A455B;"},[c]),p(" = "),l[c]])))?o:{default:()=>[o]})};return N(()=>{y()}),{globalParams:_,localParams:h,localButton:P,handleCopy:v}},render(){const{t:i}=V();return a("div",{class:r.variable},[a("div",{class:r.list},[a("div",{class:r.name},[a("em",{class:"ri-code-s-slash-line"},null),a("strong",{style:"padding-top: 3px;display: inline-block"},[i("project.workflow.global_parameters")])]),a("div",{class:r["var-cont"]},[this.globalParams.map((e,t)=>a(b,{key:t,type:"primary",style:{marginRight:"5px"},onClick:()=>this.handleCopy(`${e.prop}=${e.value}`)},{default:()=>[a("strong",{style:"color: #2A455B; margin-right: 4px"},[e.prop])," ",p("= "),e.value]}))])]),a("div",{class:r.list,style:"height: 30px;"},[a("div",{class:r.name},[a("em",{class:"ri-code-s-slash-line"},null),a("strong",{style:"padding-top: 3px;display: inline-block"},[i("project.workflow.local_parameters")])]),a("div",{class:r["var-cont"]},[p("\xA0")])]),Object.keys(this.localParams).map((e,t)=>a("div",{class:`${r.list} ${r["list-t"]}`},[a("div",{class:r["task-name"]},[p("Task("),t,p("): "),e]),a("div",{class:r["var-cont"]},[this.localParams[e].localParamsList.map((m,u)=>this.localButton(u,this.localParams[e].taskType,m))])]))])}});export{H as default};
