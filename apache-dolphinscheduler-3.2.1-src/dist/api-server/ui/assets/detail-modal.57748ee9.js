import{d as I,b7 as j,b8 as J,b9 as N,u as U,bt as F,a as M,B as K,n as V,e as d,w as B,c as O,J as Q,t as H}from"./index.851b5188.js";import{M as Y}from"./index.e69e8738.js";import W from"./detail.26980e87.js";import{l as q}from"./lodash.68b7405b.js";import{q as z}from"./index.4701b8ec.js";import{u as G}from"./task-type.dfd9250b.js";import{q as $}from"./index.35726d3e.js";import{H as X}from"./common.ee372ad3.js";import{P as Z}from"./ProfileOutlined.18d24d11.js";import{N as ee}from"./Icon.afc45566.js";const re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},se=N("path",{d:"M740 161c-61.8 0-112 50.2-112 112c0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1c0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1c0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0 0 34.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2c0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0 1 96 0a48.01 48.01 0 0 1-96 0zm96 600a48.01 48.01 0 0 1-96 0a48.01 48.01 0 0 1 96 0zm408-491a48.01 48.01 0 0 1 0-96a48.01 48.01 0 0 1 0 96z",fill:"currentColor"},null,-1),te=[se],ie=I({name:"BranchesOutlined",render:function(r,o){return j(),J("svg",re,te)}}),oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ne=N("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z","fill-opacity":".8",fill:"currentColor"},null,-1),le=N("path",{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372s372-166.6 372-372s-166.6-372-372-372zm0 632c-22.1 0-40-17.9-40-40s17.9-40 40-40s40 17.9 40 40s-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 0 0-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9c12.9-18.6 30.9-32.8 52.1-40.9c34-13.1 56-41.6 56-72.7c0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z","fill-opacity":".1",fill:"currentColor"},null,-1),ae=N("path",{d:"M472 732a40 40 0 1 0 80 0a40 40 0 1 0-80 0zm151.6-415.3C593.6 290.5 554 276 512 276s-81.6 14.4-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56 72.7c-21.2 8.1-39.2 22.3-52.1 40.9c-13.2 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5c0-39.3-17.2-76-48.4-103.3z","fill-opacity":".8",fill:"currentColor"},null,-1),ce=[ne,le,ae],me=I({name:"QuestionCircleTwotone",render:function(r,o){return j(),J("svg",oe,ce)}});function Ne(e){var l,y,a,c,T,f;const r={};if((e.taskType==="SUB_PROCESS"||e.taskType==="DYNAMIC")&&(r.processDefinitionCode=e.processDefinitionCode),e.taskType==="JAVA"&&(r.runType=e.runType,r.mainArgs=e.mainArgs,r.jvmArgs=e.jvmArgs,r.isModulePath=e.isModulePath,e.runType==="JAR"&&e.mainJar&&(r.mainJar={resourceName:e.mainJar})),e.taskType&&["SPARK","MR","FLINK","FLINK_STREAM"].includes(e.taskType)&&(r.programType=e.programType,r.mainClass=e.mainClass,e.mainJar&&(r.mainJar={resourceName:e.mainJar}),r.deployMode=e.deployMode,r.appName=e.appName,r.mainArgs=e.mainArgs,r.others=e.others,e.namespace&&(r.namespace=e.namespace),r.yarnQueue=e.yarnQueue),e.taskType==="SPARK"&&(r.driverCores=e.driverCores,r.driverMemory=e.driverMemory,r.numExecutors=e.numExecutors,r.executorMemory=e.executorMemory,r.executorCores=e.executorCores,r.sqlExecutionType=e.sqlExecutionType),(e.taskType==="FLINK"||e.taskType==="FLINK_STREAM")&&(r.flinkVersion=e.flinkVersion,r.jobManagerMemory=e.jobManagerMemory,r.taskManagerMemory=e.taskManagerMemory,r.slot=e.slot,r.taskManager=e.taskManager,r.parallelism=e.parallelism),e.taskType==="HTTP"&&(r.httpMethod=e.httpMethod,r.httpCheckCondition=e.httpCheckCondition,r.httpParams=e.httpParams,r.url=e.url,r.condition=e.condition,r.connectTimeout=e.connectTimeout,r.socketTimeout=e.socketTimeout),e.taskType==="SQOOP")if(r.jobType=e.isCustomTask?"CUSTOM":"TEMPLATE",r.localParams=e.localParams,e.isCustomTask)r.customShell=e.customShell;else{r.jobName=e.jobName,r.hadoopCustomParams=e.hadoopCustomParams,r.sqoopAdvancedParams=e.sqoopAdvancedParams,r.concurrency=e.concurrency,r.splitBy=e.splitBy,r.modelType=e.modelType,r.sourceType=e.sourceType,r.targetType=e.targetType;let t={},m={};switch(e.targetType){case"HIVE":t={hiveDatabase:e.targetHiveDatabase,hiveTable:e.targetHiveTable,createHiveTable:e.targetHiveCreateTable,dropDelimiter:e.targetHiveDropDelimiter,hiveOverWrite:e.targetHiveOverWrite,hiveTargetDir:e.targetHiveTargetDir,replaceDelimiter:e.targetHiveReplaceDelimiter,hivePartitionKey:e.targetHivePartitionKey,hivePartitionValue:e.targetHivePartitionValue};break;case"HDFS":t={targetPath:e.targetHdfsTargetPath,deleteTargetDir:e.targetHdfsDeleteTargetDir,compressionCodec:e.targetHdfsCompressionCodec,fileType:e.targetHdfsFileType,fieldsTerminated:e.targetHdfsFieldsTerminated,linesTerminated:e.targetHdfsLinesTerminated};break;case"MYSQL":t={targetType:e.targetMysqlType,targetDatasource:e.targetMysqlDatasource,targetTable:e.targetMysqlTable,targetColumns:e.targetMysqlColumns,fieldsTerminated:e.targetMysqlFieldsTerminated,linesTerminated:e.targetMysqlLinesTerminated,isUpdate:e.targetMysqlIsUpdate,targetUpdateKey:e.targetMysqlTargetUpdateKey,targetUpdateMode:e.targetMysqlUpdateMode};break}switch(e.sourceType){case"MYSQL":m={srcTable:e.srcQueryType==="1"?"":e.srcTable,srcColumnType:e.srcQueryType==="1"?"0":e.srcColumnType,srcColumns:e.srcQueryType==="1"||e.srcColumnType==="0"?"":e.srcColumns,srcQuerySql:e.srcQueryType==="0"?"":e.sourceMysqlSrcQuerySql,srcQueryType:e.srcQueryType,srcType:e.sourceMysqlType,srcDatasource:e.sourceMysqlDatasource,mapColumnHive:e.mapColumnHive,mapColumnJava:e.mapColumnJava};break;case"HDFS":m={exportDir:e.sourceHdfsExportDir};break;case"HIVE":m={hiveDatabase:e.sourceHiveDatabase,hiveTable:e.sourceHiveTable,hivePartitionKey:e.sourceHivePartitionKey,hivePartitionValue:e.sourceHivePartitionValue};break}r.targetParams=JSON.stringify(t),r.sourceParams=JSON.stringify(m)}e.taskType==="SQL"&&(r.type=e.type,r.datasource=e.datasource,r.sql=e.sql,r.sqlType=e.sqlType,r.preStatements=e.preStatements,r.postStatements=e.postStatements,r.sendEmail=e.sendEmail,r.displayRows=e.displayRows,e.sqlType==="0"&&e.sendEmail&&(r.title=e.title,r.groupId=e.groupId),e.type==="HIVE"&&(e.udfs&&(r.udfs=e.udfs.join(",")),r.connParams=e.connParams),e.type==="KYUUBI"&&e.udfs&&(r.udfs=e.udfs.join(","))),e.taskType==="PROCEDURE"&&(r.type=e.type,r.datasource=e.datasource,r.method=e.method),e.taskType==="SEATUNNEL"&&(r.startupScript=e.startupScript,r.useCustom=e.useCustom,r.rawScript=e.rawScript,(l=e.startupScript)!=null&&l.includes("flink")&&(r.runMode=e.runMode,r.others=e.others),(y=e.startupScript)!=null&&y.includes("spark")&&(r.deployMode=e.deployMode,r.master=e.master,r.masterUrl=e.masterUrl),e.startupScript==="seatunnel.sh"&&(r.deployMode=e.deployMode,r.others=e.others)),e.taskType==="SWITCH"&&(r.switchResult={},r.switchResult.dependTaskList=e.dependTaskList,r.switchResult.nextNode=e.nextNode),e.taskType==="CONDITIONS"&&(r.dependence={relation:e.relation,dependTaskList:e.dependTaskList},r.conditionResult={},e.successBranch&&(r.conditionResult.successNode=[e.successBranch]),e.failedBranch&&(r.conditionResult.failedNode=[e.failedBranch])),e.taskType==="DATAX"&&(r.customConfig=e.customConfig?1:0,r.customConfig===0?(r.dsType=e.dsType,r.dataSource=e.dataSource,r.dtType=e.dtType,r.dataTarget=e.dataTarget,r.sql=e.sql,r.targetTable=e.targetTable,r.jobSpeedByte=e.jobSpeedByte,r.jobSpeedRecord=e.jobSpeedRecord,r.preStatements=e.preStatements,r.postStatements=e.postStatements):(r.json=e.json,(a=e==null?void 0:e.localParams)==null||a.map(t=>{t.direct="IN",t.type="VARCHAR"})),r.xms=e.xms,r.xmx=e.xmx),e.taskType==="DEPENDENT"&&(r.dependence={checkInterval:e.checkInterval,failurePolicy:e.failurePolicy,failureWaitingTime:e.failureWaitingTime,relation:e.relation,dependTaskList:e.dependTaskList}),e.taskType==="DATA_QUALITY"&&(r.ruleId=e.ruleId,r.ruleInputParameter={check_type:e.check_type,comparison_execute_sql:e.comparison_execute_sql,comparison_type:e.comparison_type,comparison_name:e.comparison_name,failure_strategy:e.failure_strategy,operator:e.operator,src_connector_type:e.src_connector_type,src_datasource_id:e.src_datasource_id,src_database:e.src_database,field_length:e.field_length,begin_time:e.begin_time,deadline:e.deadline,datetime_format:e.datetime_format,enum_list:e.enum_list,regexp_pattern:e.regexp_pattern,target_filter:e.target_filter,src_filter:e.src_filter,src_field:e.src_field,src_table:e.src_table,statistics_execute_sql:e.statistics_execute_sql,statistics_name:e.statistics_name,target_connector_type:e.target_connector_type,target_datasource_id:e.target_datasource_id,target_database:e.target_database,target_table:e.target_table,threshold:e.threshold,mapping_columns:JSON.stringify(e.mapping_columns)},r.sparkParameters={deployMode:e.deployMode,driverCores:e.driverCores,driverMemory:e.driverMemory,executorCores:e.executorCores,executorMemory:e.executorMemory,numExecutors:e.numExecutors,others:e.others,yarnQueue:e.yarnQueue,sqlExecutionType:e.sqlExecutionType}),e.taskType==="EMR"&&(r.type=e.type,r.programType=e.programType,r.jobFlowDefineJson=e.jobFlowDefineJson,r.stepsDefineJson=e.stepsDefineJson),e.taskType==="ZEPPELIN"&&(r.noteId=e.noteId,r.paragraphId=e.paragraphId,r.restEndpoint=e.restEndpoint,r.username=e.username,r.password=e.password,r.productionNoteDirectory=e.productionNoteDirectory,r.parameters=e.parameters),e.taskType==="K8S"&&(r.namespace=e.namespace,r.minCpuCores=e.minCpuCores,r.minMemorySpace=e.minMemorySpace,r.image=e.image,r.imagePullPolicy=e.imagePullPolicy,r.command=e.command,r.args=e.args,r.customizedLabels=e.customizedLabels,r.nodeSelectors=e.nodeSelectors),e.taskType==="JUPYTER"&&(r.condaEnvName=e.condaEnvName,r.inputNotePath=e.inputNotePath,r.outputNotePath=e.outputNotePath,r.parameters=e.parameters,r.kernel=e.kernel,r.engine=e.engine,r.executionTimeout=e.executionTimeout,r.startTimeout=e.startTimeout,r.others=e.others),e.taskType==="MLFLOW"&&(r.algorithm=e.algorithm,r.params=e.params,r.searchParams=e.searchParams,r.dataPath=e.dataPath,r.experimentName=e.experimentName,r.modelName=e.modelName,r.mlflowTrackingUri=e.mlflowTrackingUri,r.mlflowJobType=e.mlflowJobType,r.automlTool=e.automlTool,r.registerModel=e.registerModel,r.mlflowTaskType=e.mlflowTaskType,r.deployType=e.deployType,r.deployPort=e.deployPort,r.deployModelKey=e.deployModelKey,r.mlflowProjectRepository=e.mlflowProjectRepository,r.mlflowProjectVersion=e.mlflowProjectVersion),e.taskType==="DVC"&&(r.dvcTaskType=e.dvcTaskType,r.dvcRepository=e.dvcRepository,r.dvcVersion=e.dvcVersion,r.dvcDataLocation=e.dvcDataLocation,r.dvcMessage=e.dvcMessage,r.dvcLoadSaveDataPath=e.dvcLoadSaveDataPath,r.dvcStoreUrl=e.dvcStoreUrl),e.taskType==="SAGEMAKER"&&(r.sagemakerRequestJson=e.sagemakerRequestJson),e.taskType==="PYTORCH"&&(r.script=e.script,r.scriptParams=e.scriptParams,r.pythonPath=e.pythonPath,r.isCreateEnvironment=e.isCreateEnvironment,r.pythonCommand=e.pythonCommand,r.pythonEnvTool=e.pythonEnvTool,r.requirements=e.requirements,r.condaPythonVersion=e.condaPythonVersion),e.taskType==="DINKY"&&(r.address=e.address,r.taskId=e.taskId,r.online=e.online),e.taskType==="OPENMLDB"&&(r.zk=e.zk,r.zkPath=e.zkPath,r.executeMode=e.executeMode,r.sql=e.sql),e.taskType==="CHUNJUN"&&(r.customConfig=e.customConfig?1:0,r.json=e.json,r.deployMode=e.deployMode,r.others=e.others),e.taskType==="PIGEON"&&(r.targetJobName=e.targetJobName),e.taskType==="HIVECLI"&&(r.hiveCliTaskExecutionType=e.hiveCliTaskExecutionType,r.hiveSqlScript=e.hiveSqlScript,r.hiveCliOptions=e.hiveCliOptions),e.taskType==="DMS"&&(r.isRestartTask=e.isRestartTask,r.isJsonFormat=e.isJsonFormat,r.jsonData=e.jsonData,r.migrationType=e.migrationType,r.replicationTaskIdentifier=e.replicationTaskIdentifier,r.sourceEndpointArn=e.sourceEndpointArn,r.targetEndpointArn=e.targetEndpointArn,r.replicationInstanceArn=e.replicationInstanceArn,r.tableMappings=e.tableMappings,r.replicationTaskArn=e.replicationTaskArn),e.taskType==="DATASYNC"&&(r.jsonFormat=e.jsonFormat,r.json=e.json,r.destinationLocationArn=e.destinationLocationArn,r.sourceLocationArn=e.sourceLocationArn,r.name=e.name,r.cloudWatchLogGroupArn=e.cloudWatchLogGroupArn),e.taskType==="KUBEFLOW"&&(r.yamlContent=e.yamlContent,r.namespace=e.namespace),e.taskType==="LINKIS"&&(r.useCustom=e.useCustom,r.paramScript=e.paramScript,r.rawScript=e.rawScript),e.taskType==="DATA_FACTORY"&&(r.factoryName=e.factoryName,r.resourceGroupName=e.resourceGroupName,r.pipelineName=e.pipelineName),e.taskType==="REMOTESHELL"&&(r.type=e.type,r.datasource=e.datasource),e.taskType==="DYNAMIC"&&(r.processDefinitionCode=e.processDefinitionCode,r.maxNumOfSubWorkflowInstances=e.maxNumOfSubWorkflowInstances,r.degreeOfParallelism=e.degreeOfParallelism,r.filterCondition=e.filterCondition,r.listParameters=e.listParameters);let o="";e.timeoutNotifyStrategy&&(e.timeoutNotifyStrategy.length===1&&(o=e.timeoutNotifyStrategy[0]),e.timeoutNotifyStrategy.length===2&&(o="WARNFAILED"));const u={processDefinitionCode:e.processName?String(e.processName):"",upstreamCodes:(c=e==null?void 0:e.preTasks)==null?void 0:c.join(","),taskDefinitionJsonObj:{code:e.code,delayTime:e.delayTime?String(e.delayTime):"0",description:e.description,environmentCode:e.environmentCode||-1,failRetryInterval:e.failRetryInterval?String(e.failRetryInterval):"0",failRetryTimes:e.failRetryTimes?String(e.failRetryTimes):"0",flag:e.flag,isCache:e.isCache?"YES":"NO",name:e.name,taskGroupId:e.taskGroupId,taskGroupPriority:e.taskGroupPriority,taskParams:{localParams:(T=e.localParams)==null?void 0:T.map(t=>(t.value=t.value||"",t)),initScript:e.initScript,rawScript:e.rawScript,resourceList:(f=e.resourceList)!=null&&f.length?e.resourceList.map(t=>({resourceName:`${t}`})):[],...r},taskPriority:e.taskPriority,taskType:e.taskType,timeout:e.timeoutFlag?e.timeout:0,timeoutFlag:e.timeoutFlag?"OPEN":"CLOSE",timeoutNotifyStrategy:e.timeoutFlag?o:"",workerGroup:e.workerGroup,cpuQuota:e.cpuQuota||-1,memoryMax:e.memoryMax||-1,taskExecuteType:e.taskExecuteType}};return e.timeoutFlag||(u.taskDefinitionJsonObj.timeout=0,u.taskDefinitionJsonObj.timeoutNotifyStrategy=""),u}function ue(e){var o,u,l,y,a,c,T,f,t,m,_,C,v,P,S,i,n,g,p,k,D,h,b,L,E,w,A,R,x;const r={...q.exports.omit(e,["environmentCode","timeoutFlag","timeoutNotifyStrategy","taskParams"]),...q.exports.omit(e.taskParams,["resourceList","mainJar","localParams"]),environmentCode:e.environmentCode===-1?null:e.environmentCode,timeoutFlag:e.timeoutFlag==="OPEN",isCache:e.isCache==="YES",timeoutNotifyStrategy:e.timeoutNotifyStrategy?[e.timeoutNotifyStrategy]:[],localParams:((o=e.taskParams)==null?void 0:o.localParams)||[]};if(e.timeoutNotifyStrategy==="WARNFAILED"&&(r.timeoutNotifyStrategy=["WARN","FAILED"]),(u=e.taskParams)!=null&&u.resourceList&&(r.resourceList=e.taskParams.resourceList.map(s=>`${s.resourceName}`)),(l=e.taskParams)!=null&&l.mainJar&&(r.mainJar=(y=e.taskParams)==null?void 0:y.mainJar.resourceName),(a=e.taskParams)!=null&&a.method&&(r.method=(c=e.taskParams)==null?void 0:c.method),(T=e.taskParams)!=null&&T.targetParams){const s=JSON.parse(e.taskParams.targetParams);r.targetHiveDatabase=s.hiveDatabase,r.targetHiveTable=s.hiveTable,r.targetHiveCreateTable=s.createHiveTable,r.targetHiveDropDelimiter=s.dropDelimiter,r.targetHiveOverWrite=s.hiveOverWrite===void 0?!0:s.hiveOverWrite,r.targetHiveTargetDir=s.hiveTargetDir,r.targetHiveReplaceDelimiter=s.replaceDelimiter,r.targetHivePartitionKey=s.hivePartitionKey,r.targetHivePartitionValue=s.hivePartitionValue,r.targetHdfsTargetPath=s.targetPath,r.targetHdfsDeleteTargetDir=s.deleteTargetDir===void 0?!0:s.deleteTargetDir,r.targetHdfsCompressionCodec=s.compressionCodec===void 0?"snappy":s.compressionCodec,r.targetHdfsFileType=s.fileType===void 0?"--as-avrodatafile":s.fileType,r.targetHdfsFieldsTerminated=s.fieldsTerminated,r.targetHdfsLinesTerminated=s.linesTerminated,r.targetMysqlType=s.targetType,r.targetMysqlDatasource=s.targetDatasource,r.targetMysqlTable=s.targetTable,r.targetMysqlColumns=s.targetColumns,r.targetMysqlFieldsTerminated=s.fieldsTerminated,r.targetMysqlLinesTerminated=s.linesTerminated,r.targetMysqlIsUpdate=s.isUpdate,r.targetMysqlTargetUpdateKey=s.targetUpdateKey,r.targetMysqlUpdateMode=s.targetUpdateMode===void 0?"allowinsert":s.targetUpdateMode}if((f=e.taskParams)!=null&&f.sourceParams){const s=JSON.parse(e.taskParams.sourceParams);r.srcTable=s.srcTable,r.srcColumnType=s.srcColumnType,r.srcColumns=s.srcColumns,r.sourceMysqlSrcQuerySql=s.srcQuerySql,r.srcQueryType=s.srcQueryType,r.sourceMysqlType=s.srcType,r.sourceMysqlDatasource=s.srcDatasource,r.mapColumnHive=s.mapColumnHive||[],r.mapColumnJava=s.mapColumnJava||[],r.sourceHdfsExportDir=s.exportDir,r.sourceHiveDatabase=s.hiveDatabase,r.sourceHiveTable=s.hiveTable,r.sourceHivePartitionKey=s.hivePartitionKey,r.sourceHivePartitionValue=s.hivePartitionValue}if((t=e.taskParams)!=null&&t.rawScript&&(r.rawScript=(m=e.taskParams)==null?void 0:m.rawScript),(_=e.taskParams)!=null&&_.initScript&&(r.initScript=(C=e.taskParams)==null?void 0:C.initScript),(v=e.taskParams)!=null&&v.switchResult&&(r.switchResult=e.taskParams.switchResult,r.dependTaskList=(P=e.taskParams.switchResult)!=null&&P.dependTaskList?(S=e.taskParams.switchResult)==null?void 0:S.dependTaskList:[],r.nextNode=(i=e.taskParams.switchResult)==null?void 0:i.nextNode),(n=e.taskParams)!=null&&n.dependence){const s=JSON.parse(JSON.stringify(e.taskParams.dependence));r.checkInterval=s.checkInterval,r.failurePolicy=s.failurePolicy,r.failureWaitingTime=s.failureWaitingTime,r.dependTaskList=s.dependTaskList||[],r.relation=s.relation}return(g=e.taskParams)!=null&&g.ruleInputParameter&&(r.check_type=e.taskParams.ruleInputParameter.check_type,r.comparison_execute_sql=e.taskParams.ruleInputParameter.comparison_execute_sql,r.comparison_type=e.taskParams.ruleInputParameter.comparison_type,r.comparison_name=e.taskParams.ruleInputParameter.comparison_name,r.failure_strategy=e.taskParams.ruleInputParameter.failure_strategy,r.operator=e.taskParams.ruleInputParameter.operator,r.src_connector_type=e.taskParams.ruleInputParameter.src_connector_type,r.src_datasource_id=e.taskParams.ruleInputParameter.src_datasource_id,r.src_database=e.taskParams.ruleInputParameter.src_database,r.src_table=e.taskParams.ruleInputParameter.src_table,r.field_length=e.taskParams.ruleInputParameter.field_length,r.begin_time=e.taskParams.ruleInputParameter.begin_time,r.deadline=e.taskParams.ruleInputParameter.deadline,r.datetime_format=e.taskParams.ruleInputParameter.datetime_format,r.target_filter=e.taskParams.ruleInputParameter.target_filter,r.regexp_pattern=e.taskParams.ruleInputParameter.regexp_pattern,r.enum_list=e.taskParams.ruleInputParameter.enum_list,r.src_filter=e.taskParams.ruleInputParameter.src_filter,r.src_field=e.taskParams.ruleInputParameter.src_field,r.statistics_execute_sql=e.taskParams.ruleInputParameter.statistics_execute_sql,r.statistics_name=e.taskParams.ruleInputParameter.statistics_name,r.target_connector_type=e.taskParams.ruleInputParameter.target_connector_type,r.target_datasource_id=e.taskParams.ruleInputParameter.target_datasource_id,r.target_database=e.taskParams.ruleInputParameter.target_database,r.target_table=e.taskParams.ruleInputParameter.target_table,r.threshold=e.taskParams.ruleInputParameter.threshold,e.taskParams.ruleInputParameter.mapping_columns&&(r.mapping_columns=JSON.parse(e.taskParams.ruleInputParameter.mapping_columns))),(p=e.taskParams)!=null&&p.sparkParameters&&(r.deployMode=e.taskParams.sparkParameters.deployMode,r.driverCores=e.taskParams.sparkParameters.driverCores,r.driverMemory=e.taskParams.sparkParameters.driverMemory,r.executorCores=e.taskParams.sparkParameters.executorCores,r.executorMemory=e.taskParams.sparkParameters.executorMemory,r.numExecutors=e.taskParams.sparkParameters.numExecutors,r.others=e.taskParams.sparkParameters.others,r.sqlExecutionType=e.taskParams.sparkParameters.sqlExecutionType),(h=(D=(k=e.taskParams)==null?void 0:k.conditionResult)==null?void 0:D.successNode)!=null&&h.length&&(r.successBranch=e.taskParams.conditionResult.successNode[0]),(E=(L=(b=e.taskParams)==null?void 0:b.conditionResult)==null?void 0:L.failedNode)!=null&&E.length&&(r.failedBranch=e.taskParams.conditionResult.failedNode[0]),(w=e.taskParams)!=null&&w.udfs&&(r.udfs=(A=e.taskParams.udfs)==null?void 0:A.split(",")),((R=e.taskParams)==null?void 0:R.customConfig)!==void 0&&(r.customConfig=e.taskParams.customConfig===1),(x=e.taskParams)!=null&&x.jobType&&(r.isCustomTask=e.taskParams.jobType==="CUSTOM"),r}const pe={JAVA:{alias:"JAVA"},SHELL:{alias:"SHELL"},SUB_PROCESS:{alias:"SUB_PROCESS"},DYNAMIC:{alias:"DYNAMIC"},PROCEDURE:{alias:"PROCEDURE"},SQL:{alias:"SQL"},SPARK:{alias:"SPARK"},FLINK:{alias:"FLINK"},MR:{alias:"MapReduce",helperLinkDisable:!0},PYTHON:{alias:"PYTHON"},DEPENDENT:{alias:"DEPENDENT"},HTTP:{alias:"HTTP"},DATAX:{alias:"DataX"},PIGEON:{alias:"PIGEON"},SQOOP:{alias:"SQOOP",helperLinkDisable:!0},CONDITIONS:{alias:"CONDITIONS"},DATA_QUALITY:{alias:"DATA_QUALITY",helperLinkDisable:!0},SWITCH:{alias:"SWITCH"},SEATUNNEL:{alias:"SeaTunnel",helperLinkDisable:!0},EMR:{alias:"AmazonEMR",helperLinkDisable:!0},ZEPPELIN:{alias:"ZEPPELIN",helperLinkDisable:!0},JUPYTER:{alias:"JUPYTER",helperLinkDisable:!0},K8S:{alias:"K8S",helperLinkDisable:!0},MLFLOW:{alias:"MLFLOW",helperLinkDisable:!0},OPENMLDB:{alias:"OPENMLDB",helperLinkDisable:!0},DVC:{alias:"DVC",helperLinkDisable:!0},DINKY:{alias:"DINKY",helperLinkDisable:!0},SAGEMAKER:{alias:"SageMaker",helperLinkDisable:!0},CHUNJUN:{alias:"CHUNJUN",helperLinkDisable:!0},FLINK_STREAM:{alias:"FLINK_STREAM",helperLinkDisable:!0,taskExecuteType:"STREAM"},PYTORCH:{alias:"Pytorch",helperLinkDisable:!0},HIVECLI:{alias:"HIVECLI",helperLinkDisable:!0},DMS:{alias:"DMS",helperLinkDisable:!0},DATASYNC:{alias:"DATASYNC",helperLinkDisable:!0},KUBEFLOW:{alias:"KUBEFLOW",helperLinkDisable:!0},LINKIS:{alias:"LINKIS",helperLinkDisable:!0},DATA_FACTORY:{alias:"DATA_FACTORY",helperLinkDisable:!0},REMOTESHELL:{alias:"REMOTESHELL",helperLinkDisable:!0}},ye={show:{type:Boolean,default:!1},data:{type:Object,default:{code:0,taskType:"SHELL",name:""}},projectCode:{type:Number,required:!0,default:0},readonly:{type:Boolean,default:!1},from:{type:Number,default:0},definition:{type:Object},processInstance:{type:Object},taskInstance:{type:Object},saving:{type:Boolean,default:!1}},Te=I({name:"NodeDetailModal",props:ye,emits:["cancel","submit","viewLog"],setup(e,{emit:r}){const{t:o,locale:u}=U(),l=F(),y=G(),a=i=>()=>H(ee,null,{default:()=>H(i)}),c=M(),T=async()=>{await c.value.value.validate(),r("submit",{data:c.value.value.getValues()})},f=()=>{r("cancel")},t=M([]),m=M({}),_=()=>{e.taskInstance&&r("viewLog",e.taskInstance.id,e.taskInstance.taskType)},C=i=>{$(i).then(n=>{(n==null?void 0:n.preferences)&&n.state===1&&(m.value=JSON.parse(n.preferences))})},v=i=>{i!=null&&i.id||Object.assign(i,m.value)},P=(i,n)=>{var g;t.value=[{text:o("project.node.instructions"),show:!!(n&&!((g=pe[n])!=null&&g.helperLinkDisable)),action:()=>{let p=n==null?void 0:n.toLowerCase().replace("_","-");n==="PROCEDURE"&&(p="stored-procedure");const k="https://dolphinscheduler.apache.org/"+u.value.toLowerCase().replace("_","-")+"/docs/latest/user_doc/guide/task/"+p+".html";window.open(k)},icon:a(me)},{text:o("project.node.view_history"),show:!!e.taskInstance,action:()=>{l.push({name:"task-instance",params:{processInstanceId:i.id,taskName:e.data.name}})},icon:a(X)},{text:o("project.node.view_log"),show:!!e.taskInstance,action:()=>{_()},icon:a(Z)},{text:o("project.node.enter_this_child_node"),show:e.data.taskType==="SUB_PROCESS"||e.data.taskType==="DYNAMIC",disabled:!e.data.id||l.currentRoute.value.name==="workflow-instance-detail"&&!e.taskInstance,action:()=>{var p,k;l.currentRoute.value.name==="workflow-instance-detail"?z({taskId:(p=e.taskInstance)==null?void 0:p.id},{projectCode:e.projectCode}).then(D=>{var h;l.push({name:"workflow-instance-detail",params:{id:D.subProcessInstanceId},query:{code:(h=e.data.taskParams)==null?void 0:h.processDefinitionCode}})}):l.push({name:"workflow-definition-detail",params:{code:(k=e.data.taskParams)==null?void 0:k.processDefinitionCode}})},icon:a(ie)}]},S=i=>{e.data.taskType=i,P(e.processInstance,e.data.taskType)};return K("data",V(()=>({projectCode:e.projectCode,data:e.data,from:e.from,readonly:e.readonly,definition:e.definition}))),d(()=>{C(e.projectCode)}),B(()=>[e.show,e.data],async()=>{if(!e.show)return;P(e.processInstance,e.data.taskType),y.init();const i=ue(e.data);await Q(),v(i),c.value.value.setValues(i)}),()=>O(Y,{show:e.show,title:e.from===1?`${o("project.task.current_task_settings")}`:`${o("project.node.current_node_settings")}`,onConfirm:T,confirmLoading:e.saving,confirmDisabled:e.readonly,onCancel:f,headerLinks:t},{default:()=>[O(W,{ref:c,onTaskTypeChange:S,key:e.data.taskType},null)]})}}),Me=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"}));export{Te as N,Me as d,Ne as f};
