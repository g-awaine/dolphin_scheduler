import{d as _,bF as D,bI as v,bt as O,u as R,a as p,e as w,c as f}from"./index.851b5188.js";import C from"./index.aada9b99.js";import{a as J,u as j}from"./index.23da2c90.js";import{u as I}from"./dag-auto-layout-modal.1ba7bfdf.js";import{u as L}from"./use-message.e3f85643.js";import"./dag-toolbar.9c9c21cc.js";import"./dag.module.6dc78b46.js";import"./index.6abc819d.js";import"./toNumber.c7e8ca68.js";import"./_baseMap.9542141b.js";import"./get.aa32335f.js";import"./debounce.948fb11c.js";import"./lodash.68b7405b.js";import"./index.73124cc7.js";import"./dag-context-menu.e22e9ab5.js";import"./index.18b4303b.js";import"./service.4be3af67.js";import"./ui-setting.39219f0f.js";import"./common.ee372ad3.js";import"./SettingOutlined.e20148d7.js";import"./PauseCircleOutlined.28d888d0.js";import"./CloseCircleOutlined.9e282d8c.js";import"./CheckCircleOutlined.67794958.js";import"./EditOutlined.e0b6da4a.js";import"./index.d671386a.js";import"./Button.4e249408.js";import"./is-browser.45c3bd93.js";import"./use-form-item.bb4d7ada.js";import"./resolve-slot.9e6a0162.js";import"./task-type.dfd9250b.js";import"./gForce.3509cc7a.js";import"./typeof.b54b2da3.js";import"./use-text-copy.448fed4f.js";import"./dag-node-status.8cc86097.js";import"./Icon.afc45566.js";import"./format-length.d7d829b3.js";import"./Spin.447cad15.js";import"./fade-in.cssr.55dfcced.js";import"./use-compitable.ae5454ac.js";import"./index.7a579f81.js";import"./Tooltip.52cb9ce9.js";import"./Popover.30015336.js";import"./index.e739cd60.js";import"./flatten.05a2e46f.js";import"./Scrollbar.7a99b971.js";import"./VResizeObserver.6721b9ea.js";import"./use-false-until-truthy.5d7093c9.js";import"./utils.f449ed5c.js";import"./use-merged-state.e40d3a9f.js";import"./next-frame-once.e5ee25e8.js";import"./dag-startup-param.1d33a3fd.js";import"./index.b3847370.js";import"./index.2d754617.js";import"./variables-view.b9866483.js";import"./index.4701b8ec.js";import"./CopyOutlined.8195d297.js";import"./SearchOutlined.3b9a5586.js";import"./DownloadOutlined.2b4ed5b8.js";import"./SyncOutlined.95d4ed16.js";import"./DeleteOutlined.07e1d3fe.js";import"./FullscreenOutlined.01f40161.js";import"./InfoCircleOutlined.926adab8.js";import"./text.f967c9a6.js";import"./Selection.28a32045.js";import"./use-locale.f8ac8f2c.js";import"./Suffix.21a8a87f.js";import"./Select.3e0f2c28.js";import"./fade-in-scale-up.cssr.5737b1c6.js";import"./index.3ef69258.js";import"./dag-canvas.d99bd5b4.js";import"./dag-config.e2eb20b1.js";import"./dag-sidebar.cd7dc382.js";import"./ChevronRight.d6536995.js";import"./StarOutlined.2ad53855.js";import"./detail-modal.57748ee9.js";import"./index.e69e8738.js";import"./index.8acb741a.js";import"./keysOf.ab13e590.js";import"./Card.19bc42e2.js";import"./Space.f9ece73f.js";import"./get-slot.80096ab3.js";import"./detail.26980e87.js";import"./get-elements-by-json.9201707b.js";import"./Form.9f7fa8c1.js";import"./FormItem.f5b3f80b.js";import"./Grid.3ae564e0.js";import"./Input.79ba0d48.js";import"./Radio.fc32ca3b.js";import"./RadioGroup.c3ead4f3.js";import"./index.2fc51a01.js";import"./Switch.f95d65b1.js";import"./InputNumber.cc83334e.js";import"./Add.3164a73d.js";import"./Checkbox.98b84c16.js";import"./TreeSelect.5a0f3466.js";import"./index.module.4a3c8d75.js";import"./ArrowUpOutlined.284f08d8.js";import"./index.71fea87c.js";import"./index.336ca31d.js";import"./index.59799c67.js";import"./index.41692750.js";import"./index.56bd039e.js";import"./index.605d19c5.js";import"./Ellipsis.b13f7726.js";import"./index.1abd1843.js";import"./index.35726d3e.js";import"./ProfileOutlined.18d24d11.js";import"./version-modal.4c6e3cbb.js";import"./use-modal.a8c92e75.js";import"./index.834fe2cc.js";import"./index.57e264b5.js";import"./ExclamationCircleOutlined.f43290af.js";import"./Popconfirm.013915ef.js";import"./DataTable.0e9ec324.js";import"./ArrowDown.45f9e719.js";import"./Dropdown.4af83811.js";import"./use-keyboard.f4d2f0c0.js";import"./Forward.bddcd6d4.js";import"./dag-save-modal.7b1d96ef.js";/* empty css                 */import"./ButtonGroup.90ec260c.js";import"./start-modal.f3a76e73.js";import"./PlusCircleOutlined.b025a581.js";import"./RadioButton.cdb434b9.js";import"./DatePicker.b69ef36a.js";import"./index.d95f3dc5.js";import"./throttle.821ebb8d.js";const P="_container_w4ea7_17",T="_dark_w4ea7_26",x="_light_w4ea7_31",n={container:P,dark:T,light:x},ii=_({name:"WorkflowDefinitionDetails",setup(){const g=D(),a=v(),h=O(),y=L(),{t:N}=R(),o=Number(a.params.projectCode),m=Number(a.params.code),c=p(),u=p(!1),e=p(!0),l=p(),d=()=>{e.value=!0,J(m,o).then(i=>{u.value=i.processDefinition.releaseState==="ONLINE",c.value=i,e.value=!1,i.processDefinition.locations||setTimeout(()=>{const t=l.value,{submit:s}=I({graph:t});s()},1e3)})},k=({taskDefinitions:i,saveForm:t,connects:s,locations:b})=>{const S=t.globalParams.map(r=>({prop:r.key,value:r.value,direct:r.direct,type:"VARCHAR"}));j({taskDefinitionJson:JSON.stringify(i),taskRelationJson:JSON.stringify(s),locations:JSON.stringify(b),name:t.name,executionType:t.executionType,description:t.description,globalParams:JSON.stringify(S),timeout:t.timeoutFlag?t.timeout:0,releaseState:t.release?"ONLINE":"OFFLINE"},m,o).then(r=>{y.success(N("project.dag.success")),h.push({path:`/projects/${o}/workflow-definition`})})};return w(()=>{!m||!o||d()}),()=>f("div",{class:[n.container,g.darkTheme?n.dark:n.light]},[!e.value&&f(C,{ref:l,definition:c.value,onRefresh:d,projectCode:o,onSave:k,readonly:u.value},null)])}});export{ii as default};
